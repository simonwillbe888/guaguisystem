(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d44ca9d6"],{"0539":function(e,t,a){},"0dbe":function(e,t,a){"use strict";a.d(t,"h",(function(){return i})),a.d(t,"b",(function(){return r})),a.d(t,"e",(function(){return n})),a.d(t,"t",(function(){return l})),a.d(t,"i",(function(){return s})),a.d(t,"c",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"u",(function(){return p})),a.d(t,"k",(function(){return m})),a.d(t,"j",(function(){return d})),a.d(t,"o",(function(){return v})),a.d(t,"d",(function(){return f})),a.d(t,"g",(function(){return b})),a.d(t,"v",(function(){return g})),a.d(t,"l",(function(){return h})),a.d(t,"p",(function(){return D})),a.d(t,"a",(function(){return _})),a.d(t,"n",(function(){return F})),a.d(t,"q",(function(){return y})),a.d(t,"m",(function(){return T})),a.d(t,"r",(function(){return k})),a.d(t,"s",(function(){return x}));var o=a("b775");function i(){return Object(o["a"])({url:"/api/PatrolLocation/GetAllPatrolLocation",method:"get"})}function r(e){return Object(o["a"])({url:"/api/PatrolLocation/AddPatrolLocation",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/api/PatrolLocation/DeletePatrolLocation",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/api/PatrolLocation/UpdatePatrolLocation",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/api/PatrolPlan/getAllPatrolPlan",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/api/PatrolPlan/addPatrolPlan",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/api/PatrolPlan/deletePatrolPlan",method:"post",params:e})}function p(e){return Object(o["a"])({url:"/api/PatrolPlan/updatePatrolPlan",method:"post",data:e})}function m(){return Object(o["a"])({url:"/api/PatrolPlan/getPlanTypeList",method:"get"})}function d(){return Object(o["a"])({url:"/api/PatrolTemplate/getPatrolTemplateList",method:"get"})}function v(){return Object(o["a"])({url:"/api/PatrolTemplate/getPatrolTemplateSelectList",method:"get"})}function f(e){return Object(o["a"])({url:"/api/PatrolTemplate/addPatrolTemplate",method:"post",data:e})}function b(e){return Object(o["a"])({url:"/api/PatrolTemplate/deletePatrolTemplate",method:"post",params:{ID:e}})}function g(e){return Object(o["a"])({url:"/api/PatrolTemplate/updatePatrolTemplate",method:"post",data:e})}function h(){return Object(o["a"])({url:"/api/CarrierSet/getCarrierTypeList",method:"get"})}function D(e){return Object(o["a"])({url:"/api/PatrolTemplateItem/getPatrolTemplateItemList?taskTemplateId="+e.id,method:"post"})}function _(e){return Object(o["a"])({url:"/api/PatrolTemplateItem/savePatrolTemplateItem",method:"post",data:e})}function F(){return Object(o["a"])({url:"/api/PatrolPlan/getFrequencyTypeList",method:"get"})}function y(){return Object(o["a"])({url:"/api/PatrolPlan/getPlanEnableList",method:"get"})}function T(){return Object(o["a"])({url:"/api/PatrolPlan/getExecuteTypeList",method:"get"})}function k(e){return Object(o["a"])({url:"/api/PatrolPlan/startPatrolPlan?ID="+e,method:"post"})}function x(e){return Object(o["a"])({url:"/api/PatrolPlan/stopPatrolPlan?ID="+e,method:"post"})}},7661:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return n})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return s}));var o=a("b775");function i(){return Object(o["a"])({url:"/api/Map/GetMapData",method:"get"})}function r(){return Object(o["a"])({url:"/api/CarrierGroup/GetAllCarrierDetailInfo",method:"get"})}function n(e){return Object(o["a"])({url:"/api/CarrierGroup/MoveToVertex",method:"post",data:e})}function l(){return Object(o["a"])({url:"/api/Location/GetAllLocationInfo",method:"get"})}function s(e){return Object(o["a"])({url:"/api/CarrierGroup/GetCarrierDetailInfo?CarrierIndex="+e,method:"post"})}},"905b":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"page-title"},[e._v("\n    "+e._s(e.$route.query.title)+"\n    "),a("span",{staticClass:"right-btn",on:{click:function(t){return e.$router.back()}}},[a("svg-icon",{attrs:{"icon-class":"fanhui"}})],1)]),e._v(" "),a("el-container",{staticClass:"page-container"},[a("el-aside",{staticClass:"page-left"},[a("el-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-collapse-item",{attrs:{title:"任务模板列表",name:"1"}},e._l(e.templateList,(function(t){return a("div",{key:t.id,staticClass:"list-item oneLine",on:{click:e.addSonTemplate}},[e._v("\n            模板ID："+e._s(t.id)+"\n            "),a("span",{staticStyle:{"margin-left":"5px"}},[e._v("模板名称："+e._s(t.taskName))])])})),0)],1),e._v(" "),a("el-tag",{staticClass:"header-label",staticStyle:{"margin-bottom":"10px"}},[e._v("动作")]),e._v(" "),a("el-scrollbar",[a("el-button",{staticClass:"common-btn comp",attrs:{icon:"el-icon-connection",plain:""},on:{click:function(t){return e.operateRobotic()}}},[e._v("移动")]),e._v(" "),a("el-button",{staticClass:"common-btn comp",attrs:{icon:"el-icon-video-camera-solid",plain:""},on:{click:function(t){return e.operateCamera()}}},[e._v("录像")]),e._v(" "),a("el-button",{staticClass:"common-btn comp",attrs:{icon:"el-icon-camera",plain:""},on:{click:function(t){return e.operateThermalCame()}}},[e._v("拍照")]),e._v(" "),a("el-button",{staticClass:"common-btn comp",attrs:{icon:"el-icon-connection",plain:""},on:{click:function(t){return e.operateFire()}}},[e._v("语音播报")])],1)],1),e._v(" "),a("el-main",{staticClass:"page-main"},[a("el-tag",{staticClass:"header-label"},[e._v(e._s(e.$t("process_config.action_list"))+"\n        "),a("el-button",{staticStyle:{float:"right","margin-top":"10px"},attrs:{size:"mini"},on:{click:e.saveTemplate}},[e._v("\n          保存")])],1),e._v(" "),a("el-scrollbar",e._l(e.actionsList,(function(t,o){return a("div",{key:t.id,staticStyle:{margin:"10px",background:"#fff",position:"relative",display:"flex"}},[a("div",{staticClass:"act-icon"},[a("i",{staticClass:"el-icon-info"})]),e._v(" "),a("div",{staticStyle:{flex:"1","font-size":"12px","line-height":"32px"}},[a("div",{staticStyle:{width:"50%"}},[a("el-descriptions",[a("el-descriptions-item",{attrs:{label:"名称"}},[e._v(e._s(e.taskName(t.type)))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"顺序"}},[e._v(e._s(t.sequence))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"巡检点"}},[e._v(e._s(e.showInfo(t.locationID)))])],1)],1)]),e._v(" "),a("div",{staticStyle:{display:"inline-block",float:"right",height:"32px","line-height":"32px"}},[a("el-button",{staticClass:"edit-btn",attrs:{type:"primary",plain:""},on:{click:function(a){return e.editParam(t,o)}}},[e._v("修 改")]),e._v(" "),a("el-button",{staticClass:"delete-btn",attrs:{type:"primary",plain:""},on:{click:function(t){return e.deleteParam(o)}}},[e._v("删 除")])],1)])})),0)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.sonTemplateDialogTitle,visible:e.sonTemplateDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.sonTemplateDialogVisible=t}}},[a("div",{staticClass:"common-tip"},[e._v("配置子模版")]),e._v(" "),a("div",{staticClass:"common-sty"},[a("span",{staticStyle:{margin:"10px 0",display:"inline-block"}},[e._v("参数类型")]),a("br"),e._v(" "),a("div",{staticClass:"form-sty"},[a("el-form",{ref:"sonTemplateForm",attrs:{"label-width":"80px",model:e.sonTemplateForm,rules:e.sonTemplateRules}},[a("el-form-item",{attrs:{label:"顺序",prop:"sequence"}},[a("el-input",{attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.sonTemplateForm.sequence,callback:function(t){e.$set(e.sonTemplateForm,"sequence",e._n(t))},expression:"sonTemplateForm.sequence"}})],1)],1)],1)]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.sonTemplateDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addAction(1,"sonTemplateForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"录像"==e.dialogTitle?e.$t("inspection_setting.plus_video_label"):e.$t("inspection_setting.edit_video_label"),visible:e.cameraDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.cameraDialogVisible=t}}},[a("div",{staticClass:"common-tip"},[e._v("\n      预置点通过在浏览器中输入摄像头IP可登陆摄像头管理系统，查看摄像头预置点ID\n    ")]),e._v(" "),a("div",{staticClass:"common-sty"},["1"==e.cameraVal?a("div",{staticClass:"form-sty"},[a("el-form",{ref:"videoForm",attrs:{"label-width":"120px",model:e.videoForm,rules:e.videoRules}},[a("el-form-item",{attrs:{label:"录像时长(秒)",prop:"duration"}},[a("el-input",{attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.videoForm.duration,callback:function(t){e.$set(e.videoForm,"duration",e._n(t))},expression:"videoForm.duration"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"顺序",prop:"sequence"}},[a("el-input",{attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.videoForm.sequence,callback:function(t){e.$set(e.videoForm,"sequence",e._n(t))},expression:"videoForm.sequence"}})],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"水平角度(0~360)"}},[a("el-input",{attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-360]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.videoForm.yunPAngle,callback:function(t){e.$set(e.videoForm,"yunPAngle",e._n(t))},expression:"videoForm.yunPAngle"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"垂直角度(0~360)"}},[a("el-input",{attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-360]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.videoForm.yunTAngle,callback:function(t){e.$set(e.videoForm,"yunTAngle",e._n(t))},expression:"videoForm.yunTAngle"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"巡检点",prop:"locationID"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.videoForm.locationID,callback:function(t){e.$set(e.videoForm,"locationID",t)},expression:"videoForm.locationID"}},e._l(e.patrolLocationList,(function(e){return a("el-option",{key:e.LocationID,attrs:{label:e.Name,value:e.LocationID}})})),1)],1)],1)],1):e._e()]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cameraDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addAction(2,"videoForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"拍照"==e.dialogTitle?"新增拍照":"修改拍照",visible:e.thermalCameDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.thermalCameDialogVisible=t}}},[a("div",{staticClass:"common-tip"},[e._v("\n      预置点通过在浏览器中输入摄像头IP可登陆摄像头管理系统，查看摄像头预置点ID\n    ")]),e._v(" "),a("div",{staticClass:"common-sty"},[a("span",{staticStyle:{margin:"10px 0",display:"inline-block"}},[e._v("参数类型")]),a("br"),e._v(" "),"1"==e.cameraVal?a("div",{staticClass:"form-sty"},[a("el-form",{ref:"photoForm",attrs:{"label-width":"110px",model:e.photoForm,rules:e.photoRules}},[a("el-form-item",{attrs:{label:"拍照数量",prop:"count"}},[a("el-input",{attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.photoForm.count,callback:function(t){e.$set(e.photoForm,"count",e._n(t))},expression:"photoForm.count"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"采集频率(毫秒)",prop:"frequency"}},[a("el-input",{attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.photoForm.frequency,callback:function(t){e.$set(e.photoForm,"frequency",e._n(t))},expression:"photoForm.frequency"}})],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"水平角度(0~360)"}},[a("el-input",{attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-36000]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.photoForm.yunPAngle,callback:function(t){e.$set(e.photoForm,"yunPAngle",e._n(t))},expression:"photoForm.yunPAngle"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"垂直角度(0~360)"}},[a("el-input",{attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-36000]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.photoForm.yunTAngle,callback:function(t){e.$set(e.photoForm,"yunTAngle",e._n(t))},expression:"photoForm.yunTAngle"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"顺序",prop:"sequence"}},[a("el-input",{attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.photoForm.sequence,callback:function(t){e.$set(e.photoForm,"sequence",e._n(t))},expression:"photoForm.sequence"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"预置点",prop:"presetNo"}},[a("el-input",{attrs:{disabled:"",oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.photoForm.presetNo,callback:function(t){e.$set(e.photoForm,"presetNo",e._n(t))},expression:"photoForm.presetNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"巡检点",prop:"locationID"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.photoForm.locationID,callback:function(t){e.$set(e.photoForm,"locationID",t)},expression:"photoForm.locationID"}},e._l(e.patrolLocationList,(function(e){return a("el-option",{key:e.LocationID,attrs:{label:e.Name,value:e.LocationID}})})),1)],1)],1)],1):e._e()]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.thermalCameDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addAction(3,"photoForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"移动"==e.dialogTitle?"新增移动":"修改移动",visible:e.roboticDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.roboticDialogVisible=t}}},[a("div",{staticClass:"common-photo"},[a("el-form",{ref:"moveForm",attrs:{"label-width":"80px",model:e.moveForm,rules:e.moveRules}},[a("el-form-item",{attrs:{label:"目标点",prop:"toPatrolLocation"}},[a("el-radio-group",{model:{value:e.moveForm.toPatrolLocation,callback:function(t){e.$set(e.moveForm,"toPatrolLocation",t)},expression:"moveForm.toPatrolLocation"}},[a("el-radio",{attrs:{label:!0}},[e._v("移动到巡检点")]),e._v(" "),a("el-radio",{attrs:{label:!1}},[e._v("移动到其他点")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"顺序",prop:"sequence"}},[a("el-input",{attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.moveForm.sequence,callback:function(t){e.$set(e.moveForm,"sequence",e._n(t))},expression:"moveForm.sequence"}})],1),e._v(" "),e.moveForm.toPatrolLocation?e._e():a("el-form-item",{attrs:{label:"导航点",prop:"vertexID"}},[a("el-select",{staticClass:"access-select",attrs:{filterable:"",clearable:""},model:{value:e.moveForm.vertexID,callback:function(t){e.$set(e.moveForm,"vertexID",t)},expression:"moveForm.vertexID"}},e._l(e.pointOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),e.moveForm.toPatrolLocation?a("el-form-item",{attrs:{label:"巡检点",prop:"locationID"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.moveForm.locationID,callback:function(t){e.$set(e.moveForm,"locationID",t)},expression:"moveForm.locationID"}},e._l(e.patrolLocationList,(function(e){return a("el-option",{key:e.LocationID,attrs:{label:e.Name,value:e.LocationID}})})),1)],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.roboticDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addAction(4,"moveForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"addInfra"==e.dialogType?"新增红外检测":"修改红外检测",visible:e.infraDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.infraDialogVisible=t}}},[a("div",{staticClass:"common-photo"},[a("el-form",{ref:"infraForm",attrs:{"label-width":"80px",model:e.infraForm,rules:e.infraRules}},[a("el-form-item",{attrs:{label:"时长(秒)",prop:"duration"}},[a("el-input",{attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.infraForm.duration,callback:function(t){e.$set(e.infraForm,"duration",e._n(t))},expression:"infraForm.duration"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"预置点",prop:"presetNo"}},[a("el-input",{attrs:{disabled:"",oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.infraForm.presetNo,callback:function(t){e.$set(e.infraForm,"presetNo",e._n(t))},expression:"infraForm.presetNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"顺序",prop:"sequence"}},[a("el-input",{attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.infraForm.sequence,callback:function(t){e.$set(e.infraForm,"sequence",e._n(t))},expression:"infraForm.sequence"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"巡检点",prop:"locationID"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.infraForm.locationID,callback:function(t){e.$set(e.infraForm,"locationID",t)},expression:"infraForm.locationID"}},e._l(e.patrolLocationList,(function(e){return a("el-option",{key:e.LocationID,attrs:{label:e.Name,value:e.LocationID}})})),1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.infraDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addAction(5,"infraForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"addFire"==e.dialogFire?"新增语音播报":"修改语音播报",visible:e.fireDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.fireDialogVisible=t}}},[a("div",{staticClass:"common-photo"},[a("el-form",{ref:"broadcast",attrs:{"label-width":"200px",model:e.broadcast,rules:e.fireRules}},[a("el-form-item",{attrs:{label:"播报内容",prop:"readText"}},[a("el-input",{model:{value:e.broadcast.readText,callback:function(t){e.$set(e.broadcast,"readText",e._n(t))},expression:"broadcast.readText"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"播报音量(0~100)",prop:"volume"}},[a("el-input",{model:{value:e.broadcast.volume,callback:function(t){e.$set(e.broadcast,"volume",e._n(t))},expression:"broadcast.volume"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"播报速度(-10~10)",prop:"rate"}},[a("el-input",{model:{value:e.broadcast.rate,callback:function(t){e.$set(e.broadcast,"rate",e._n(t))},expression:"broadcast.rate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"播报次数",prop:"count"}},[a("el-input",{attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.broadcast.count,callback:function(t){e.$set(e.broadcast,"count",e._n(t))},expression:"broadcast.count"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"执行顺序",prop:"sequence"}},[a("el-input",{model:{value:e.broadcast.sequence,callback:function(t){e.$set(e.broadcast,"sequence",e._n(t))},expression:"broadcast.sequence"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"巡检点",prop:"locationID"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.broadcast.locationID,callback:function(t){e.$set(e.broadcast,"locationID",t)},expression:"broadcast.locationID"}},e._l(e.patrolLocationList,(function(e){return a("el-option",{key:e.LocationID,attrs:{label:e.Name,value:e.LocationID}})})),1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.fireDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addAction(6,"broadcast")}}},[e._v("确 定")])],1)])],1)},i=[],r=(a("ac6a"),a("5530")),n=(a("55dd"),a("c5f6"),a("c7eb")),l=(a("96cf"),a("1da1")),s=a("0dbe"),c=a("7661"),u={data:function(){return{dialogTitle:"",lightDialogVisible:!1,lightVal:!0,cameraDialogVisible:!1,cloudDialogVisible:!1,thermalCameDialogVisible:!1,roboticDialogVisible:!1,editDialogVisible:!1,sonTemplateDialogVisible:!1,cameraVal:"1",measureTemp:"",presetVal:"",videoForm:{duration:1,presetNo:"",pAngle:"",tAngle:"",zAngle:"",p:"",pSpeed:0,t:"",tSpeed:0,z:"",zSpeed:0,sequence:1,mode:1,yunPAngle:null,yunTAngle:null},videoRules:{duration:[{required:!0,message:"请输入时长",trigger:"change"}],sequence:[{required:!0,message:"请输入顺序",trigger:"change"}],presetNo:[{required:!0,message:"请输入预置点",trigger:"change"}],locationID:[{required:!0,message:"请输入巡检点",trigger:"change"}]},pointOptions:[],photoForm:{count:1,frequency:1,sequence:1,presetNo:"",p:"",t:"",z:"",mode:1,yunPAngle:0,yunTAngle:0},photoRules:{count:[{required:!0,message:"请输入拍照数量",trigger:"change"}],frequency:[{required:!0,message:"请输入拍照频率",trigger:"change"}],sequence:[{required:!0,message:"请输入顺序",trigger:"change"}],presetNo:[{required:!0,message:"请输入预置点",trigger:"change"}],locationID:[{required:!0,message:"请输入巡检点",trigger:"change"}]},sonTemplateForm:{mode:1,sequence:1},sonTemplateRules:{sequence:[{required:!0,message:"请输入顺序",trigger:"change"}]},joint1:50,joint2:50,joint3:50,actionsList:[],moveForm:{toPatrolLocation:!0,point:"",sequence:1,mode:1,vertexID:""},moveRules:{vertexID:[{required:!0,message:"请输选择导航点",trigger:"change"}],sequence:[{required:!0,message:"请输入顺序",trigger:"change"}],locationID:[{required:!0,message:"请输入巡检点",trigger:"change"}]},ID:0,infraDialogVisible:!1,dialogType:"",infraForm:{duration:1,presetNo:"",sequence:1,mode:1},infraRules:{duration:[{required:!0,message:"请输入时长",trigger:"change"}],sequence:[{required:!0,message:"请输入顺序",trigger:"change"}],presetNo:[{required:!0,message:"请输入预置点",trigger:"change"}],locationID:[{required:!0,message:"请输入巡检点",trigger:"change"}]},fireDialogVisible:!1,dialogFire:"",broadcast:{readText:null,volume:0,rate:0,count:0,sequence:1,mode:1},fireRules:{readText:[{required:!0,message:"请输入内容",trigger:"change"}],rate:[{required:!0,message:"请输入播报速度",trigger:"change"}],count:[{required:!0,message:"请输入播报次数",trigger:"change"}],sequence:[{required:!0,message:"请输入顺序",trigger:"change"}],volume:[{required:!0,message:"请输入播报音量",trigger:"change"}],locationID:[{required:!0,message:"请输入巡检点",trigger:"change"}]},activeName:"1",templateList:[],patrolLocationList:[],sonTemplateDialogTitle:""}},mounted:function(){this.getAllTemplate(),this.getTemplates(),this.getAllPatrolLocationList(),this.initInspectOpt()},methods:{initInspectOpt:function(){var e=this;e.actionsList=[],e.pointOptions=[],Object(c["d"])().then((function(t){var a=t.data;if(a)for(var o=a.vertexs,i=0,r=o.length;i<r;i++){var n={value:o[i].number,label:o[i].number};e.pointOptions.push(n)}})).catch((function(t){e.$notify({title:e.$t("user.Failure"),message:e.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))},taskName:function(e){switch(e){case 1:return"拍照";case 2:return"录像";case 7:return"移动";case 8:return"红外检测";case 12:return"火点检测";case 14:return"语音播报";case 65535:return"子模版"}},taskType:function(e){},getAllPatrolLocationList:function(){var e=Object(l["a"])(Object(n["a"])().mark((function e(){var t;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["h"])();case 2:t=e.sent,2e4===t.code&&(this.patrolLocationList=t.data||[]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getAllTemplate:function(){var e=Object(l["a"])(Object(n["a"])().mark((function e(){var t,a,o;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.query.id,e.next=3,Object(s["j"])();case 3:a=e.sent,2e4===a.code&&(o=a.data,console.log("查看巡检流程列表",o),o&&o.length&&(this.templateList=o.filter((function(e){return e.id!=t}))||[]));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getTemplates:function(){var e=Object(l["a"])(Object(n["a"])().mark((function e(){var t,a;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.query.id,e.next=3,Object(s["p"])({id:t});case 3:a=e.sent,2e4===a.code&&(console.log("查看子模版",a.data),this.actionsList=a.data||[]);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addSonTemplate:function(){var e=this;this.sonTemplateDialogVisible=!0,this.$nextTick((function(){e.$refs.sonTemplateForm.clearValidate()})),this.sonTemplateDialogTitle="新增子模版",this.sonTemplateForm.isEdite=!1},operateLight:function(){this.dialogTitle="补光灯",this.lightDialogVisible=!0},operateCamera:function(){var e=this;this.dialogTitle="录像",this.cameraDialogVisible=!0,this.$nextTick((function(){e.$refs.videoForm.clearValidate()})),this.videoForm={presetNo:1},this.videoForm.isEdite=!1},operateCloud:function(){this.dialogTitle="云台",this.cloudDialogVisible=!0},operateThermalCame:function(){var e=this;this.dialogTitle="拍照",this.thermalCameDialogVisible=!0,this.$nextTick((function(){e.$refs.photoForm.clearValidate()})),this.photoForm={presetNo:1},this.photoForm.isEdite=!1},operateRobotic:function(){var e=this;this.dialogTitle="移动",this.roboticDialogVisible=!0,this.$nextTick((function(){e.$refs.moveForm.clearValidate()})),this.moveForm={toPatrolLocation:!0,isEdite:!1}},operateInfrar:function(){var e=this;this.dialogType="addInfra",this.infraDialogVisible=!0,this.$nextTick((function(){e.$refs.infraForm.clearValidate()})),this.infraForm={isEdite:!1,presetNo:1}},operateFire:function(){var e=this;this.dialogFire="addFire",this.fireDialogVisible=!0,this.$nextTick((function(){e.$refs.broadcast.clearValidate()})),this.broadcast={isEdite:!1,presetNo:1}},compare:function(e){return function(t,a){var o=t[e],i=a[e];return o-i}},addAction:function(e,t){var a=this.sonTemplateForm,o=this.videoForm,i=this.moveForm,r=this.photoForm,n=this.infraForm,l=this.broadcast,s=this.$route.query.id,c=!1;switch(e){case 1:if(this.$refs.sonTemplateForm.validate((function(e){c=e})),!c)return;a.isEdite&&this.actionsList.splice(a.index,1),this.actionsList.push({objId:Date.now(),type:65535,taskTemplateID:s,mode:1,presetNo:Number(o.presetNo),sequence:Number(a.sequence)}),this.sonTemplateDialogVisible=!1;break;case 2:if(this.$refs.videoForm.validate((function(e){c=e})),!c)return;o.isEdite&&this.actionsList.splice(o.index,1),this.actionsList.push({locationID:o.locationID||0,objId:Date.now(),type:2,taskTemplateID:s,mode:1,sequence:Number(o.sequence),duration:Number(o.duration),presetNo:Number(o.presetNo),yunTAngle:100*Number(o.yunTAngle),yunPAngle:100*Number(o.yunPAngle)}),this.cameraDialogVisible=!1;break;case 3:if(this.$refs.photoForm.validate((function(e){c=e})),!c)return;r.isEdite&&this.actionsList.splice(r.index,1),this.actionsList.push({locationID:r.locationID||0,objId:Date.now(),type:1,taskTemplateID:s,mode:1,sequence:Number(r.sequence),frequency:Number(r.frequency),count:Number(r.count),presetNo:Number(r.presetNo),yunPAngle:100*Number(r.yunPAngle),yunTAngle:100*Number(r.yunTAngle)}),this.thermalCameDialogVisible=!1;break;case 4:if(this.$refs.moveForm.validate((function(e){c=e})),!c)return;i.isEdite&&this.actionsList.splice(i.index,1),this.actionsList.push({locationID:i.locationID,objId:Date.now(),type:7,toPatrolLocation:i.toPatrolLocation,taskTemplateID:s,vertexID:i.vertexID||-1,mode:1,sequence:Number(i.sequence)}),this.roboticDialogVisible=!1;break;case 5:if(this.$refs.infraForm.validate((function(e){c=e})),!c)return;n.isEdite&&this.actionsList.splice(n.index,1),this.actionsList.push({locationID:n.locationID||0,objId:Date.now(),type:8,taskTemplateID:s,mode:1,duration:Number(n.duration),presetNo:Number(n.presetNo),sequence:Number(n.sequence)}),this.infraDialogVisible=!1;break;case 6:if(this.$refs.broadcast.validate((function(e){c=e})),!c)return;l.isEdite&&this.actionsList.splice(l.index,1),this.actionsList.push({locationID:l.locationID||0,objId:Date.now(),type:14,taskTemplateID:s,mode:1,readText:l.readText,volume:Number(l.volume),count:Number(l.count),rate:Number(l.rate),duration:Number(l.duration),presetNo:Number(l.presetNo),sequence:Number(l.sequence)}),this.fireDialogVisible=!1;break}this.actionsList.sort((function(e,t){return e.sequence-t.sequence})),this.$refs[t].resetFields()},editParam:function(e,t){var a=this;this.ID=e.id,2===e.type?(this.dialogTitle="修改录像",this.cameraDialogVisible=!0,this.$nextTick((function(){a.$refs.videoForm.clearValidate()})),this.videoForm=Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},this.videoForm),e),e.operateObj),{},{isEdite:!0,index:t}),this.videoForm.yunTAngle=this.videoForm.yunTAngle/100,this.videoForm.yunPAngle=this.videoForm.yunPAngle/100):1===e.type?(this.dialogTitle="修改拍照",this.thermalCameDialogVisible=!0,this.$nextTick((function(){a.$refs.photoForm.clearValidate()})),this.photoForm=Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},this.photoForm),e),e.operateObj),{},{isEdite:!0,index:t}),this.photoForm.yunTAngle=this.photoForm.yunTAngle/100,this.photoForm.yunPAngle=this.photoForm.yunPAngle/100):7===e.type?(this.dialogTitle="修改移动",this.roboticDialogVisible=!0,this.$nextTick((function(){a.$refs.moveForm.clearValidate()})),this.moveForm=Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},this.moveForm),{},{isEdite:!0},e),e.operateObj),{},{index:t})):8===e.type?(this.dialogType="editInfra",this.infraDialogVisible=!0,this.$nextTick((function(){a.$refs.infraForm.clearValidate()})),console.log("cgw44444444444"),this.infraForm=Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},this.infraForm),e),e.operateObj),{},{isEdite:!0,index:t})):14===e.type?(this.dialogFire="editFire",this.fireDialogVisible=!0,this.$nextTick((function(){a.$refs.broadcast.clearValidate()})),this.broadcast=Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},this.broadcast),e),e.operateObj),{},{isEdite:!0,index:t})):65535===e.type&&(this.sonTemplateDialogTitle="修改子模版",this.sonTemplateDialogVisible=!0,this.$nextTick((function(){a.$refs.sonTemplateForm.clearValidate()})),this.sonTemplateForm=Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},this.sonTemplateForm),e),e.operateObj),{},{isEdite:!0,index:t}))},deleteParam:function(e){this.actionsList.splice(e,1),this.actionsList.sort((function(e,t){return e.sequence-t.sequence}))},saveTemplate:function(){var e=Object(l["a"])(Object(n["a"])().mark((function e(){var t,a,o,i;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.query.id,a=this.actionsList.map((function(e){var t={},a=Object(r["a"])(Object(r["a"])({},e),e.operateObj||{});switch(console.log("查看保存状态",a),a.type){case 1:t={frequency:a.frequency,yunPAngle:a.yunPAngle,yunTAngle:a.yunTAngle,count:a.count};break;case 2:t={duration:a.duration,yunPAngle:a.yunPAngle,yunTAngle:a.yunTAngle};break;case 7:t={toPatrolLocation:a.toPatrolLocation,locationID:a.locationID||-1,vertexID:a.vertexID||-1};break;case 8:t={presetNo:a.presetNo,duration:a.duration};break;case 12:t={presetNo:a.presetNo,duration:a.duration};break;case 14:t={readText:a.readText,volume:a.volume,rate:a.rate,count:a.count};break;case 65535:t={taskTemplateID:a.taskTemplateID};break}return a.operateJson=JSON.stringify(t),a})),o={list:a,taskTemplateID:t},e.next=5,Object(s["a"])(o);case 5:i=e.sent,2e4===i.code&&(this.$notify({message:"保存成功",type:"success",title:"提示",duration:1e3}),this.$router.back()),console.log(i);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showInfo:function(e){if(e&&this.patrolLocationList.length){var t="";return this.patrolLocationList.forEach((function(a){a.LocationID==e&&(t=a.Name)})),t}}}},p=u,m=(a("9fd5"),a("2877")),d=Object(m["a"])(p,o,i,!1,null,"768ce3de",null);t["default"]=d.exports},"9fd5":function(e,t,a){"use strict";a("0539")}}]);