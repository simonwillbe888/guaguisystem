(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f0d7cd78"],{"0dbe":function(e,t,a){"use strict";a.d(t,"h",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"e",(function(){return l})),a.d(t,"t",(function(){return o})),a.d(t,"i",(function(){return c})),a.d(t,"c",(function(){return s})),a.d(t,"f",(function(){return u})),a.d(t,"u",(function(){return p})),a.d(t,"k",(function(){return d})),a.d(t,"j",(function(){return m})),a.d(t,"o",(function(){return f})),a.d(t,"d",(function(){return b})),a.d(t,"g",(function(){return y})),a.d(t,"v",(function(){return T})),a.d(t,"l",(function(){return h})),a.d(t,"p",(function(){return k})),a.d(t,"a",(function(){return v})),a.d(t,"n",(function(){return g})),a.d(t,"q",(function(){return _})),a.d(t,"m",(function(){return F})),a.d(t,"r",(function(){return O})),a.d(t,"s",(function(){return x}));var r=a("b775");function n(){return Object(r["a"])({url:"/api/PatrolLocation/GetAllPatrolLocation",method:"get"})}function i(e){return Object(r["a"])({url:"/api/PatrolLocation/AddPatrolLocation",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/api/PatrolLocation/DeletePatrolLocation",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/api/PatrolLocation/UpdatePatrolLocation",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/api/PatrolPlan/getAllPatrolPlan",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/api/PatrolPlan/addPatrolPlan",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/api/PatrolPlan/deletePatrolPlan",method:"post",params:e})}function p(e){return Object(r["a"])({url:"/api/PatrolPlan/updatePatrolPlan",method:"post",data:e})}function d(){return Object(r["a"])({url:"/api/PatrolPlan/getPlanTypeList",method:"get"})}function m(){return Object(r["a"])({url:"/api/PatrolTemplate/getPatrolTemplateList",method:"get"})}function f(){return Object(r["a"])({url:"/api/PatrolTemplate/getPatrolTemplateSelectList",method:"get"})}function b(e){return Object(r["a"])({url:"/api/PatrolTemplate/addPatrolTemplate",method:"post",data:e})}function y(e){return Object(r["a"])({url:"/api/PatrolTemplate/deletePatrolTemplate",method:"post",params:{ID:e}})}function T(e){return Object(r["a"])({url:"/api/PatrolTemplate/updatePatrolTemplate",method:"post",data:e})}function h(){return Object(r["a"])({url:"/api/CarrierSet/getCarrierTypeList",method:"get"})}function k(e){return Object(r["a"])({url:"/api/PatrolTemplateItem/getPatrolTemplateItemList?taskTemplateId="+e.id,method:"post"})}function v(e){return Object(r["a"])({url:"/api/PatrolTemplateItem/savePatrolTemplateItem",method:"post",data:e})}function g(){return Object(r["a"])({url:"/api/PatrolPlan/getFrequencyTypeList",method:"get"})}function _(){return Object(r["a"])({url:"/api/PatrolPlan/getPlanEnableList",method:"get"})}function F(){return Object(r["a"])({url:"/api/PatrolPlan/getExecuteTypeList",method:"get"})}function O(e){return Object(r["a"])({url:"/api/PatrolPlan/startPatrolPlan?ID="+e,method:"post"})}function x(e){return Object(r["a"])({url:"/api/PatrolPlan/stopPatrolPlan?ID="+e,method:"post"})}},"9ba6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"1%"}},[a("div",{staticClass:"inspection-header content-header"},[a("div",{staticClass:"inspec-setting-inquire"},[a("el-input",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"请输入关键字",size:"mini",clearable:""},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}}),e._v(" "),a("el-select",{attrs:{placeholder:"请选择计划类型",size:"mini",clearable:""},model:{value:e.planType,callback:function(t){e.planType=t},expression:"planType"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.initPlanList}},[e._v("\n        查询")]),e._v(" "),a("el-button",{staticClass:"process-operate",attrs:{type:"success",size:"mini"},on:{click:function(t){return e.addTimedTask(null,1)}}},[e._v(e._s(e.$t("plan_config.addTimedTask_label")))])],1)]),e._v(" "),a("div",{staticClass:"robot-body content-body"},[a("div",{staticClass:"inspectTask-table"},[a("el-table",{ref:"singleTable",staticClass:"inspect-task",staticStyle:{width:"100%"},attrs:{data:e.planTasks,"header-row-class-name":"header-row-class","row-class-name":"row-class",fit:"","highlight-current-row":"",size:"small"}},[a("el-table-column",{attrs:{type:"index",fixed:"",label:"序号",align:"center",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"PlanName",label:"计划名称",width:"200",align:"center",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"TaskName",label:"流程模板",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plantypeName",label:"计划类型",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"executeTypeName",label:"执行方式",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"CarrierName",label:"小车名称",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"frequencyTypeName",label:"执行时间",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n            "+e._s(r.frequencyTypeName)+" "),a("span",{staticStyle:{margin:"5px"}}),e._v("\n            "+e._s(r.OpenTime?r.OpenTime.slice(11,16):"")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ExecuteCount",label:"执行次数",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(3===a.PlanType?"--":a.ExecuteCount)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ExecuteSpace",label:"执行间隔(分钟)",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"StartTime",label:"开始时间",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(a.StartTime||"--")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"EndTime",label:"结束时间",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(a.EndTime||"--")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"isEnableName",label:"是否启用",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ExecuteState",label:"实时状态",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(1===a.ExecuteState?"未执行":2===a.ExecuteState?"执行中":"")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"operate",label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-dropdown",[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("\n                更多"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("span",{on:{click:function(t){return e.addTimedTask(r,3)}}},[e._v("\n                    "+e._s(e.$t("plan_config.inqireDetail_label"))+"\n                  ")])]),e._v(" "),a("el-dropdown-item",[2===r.PlanType?a("span",{on:{click:function(t){return e.startTask(r)}}},[e._v("\n                    启动\n                  ")]):e._e()]),e._v(" "),a("el-dropdown-item",[a("span",{on:{click:function(t){return e.addTimedTask(r,2)}}},[e._v("\n                    "+e._s(e.$t("plan_config.edit_label"))+"\n                  ")])]),e._v(" "),a("el-dropdown-item",[3===r.PlanType?a("span",{on:{click:function(t){return e.stopTask(r)}}},[e._v("\n                    终止\n                  ")]):e._e()]),e._v(" "),a("el-dropdown-item",[a("span",{on:{click:function(t){return e.deleteTimedTask(r)}}},[e._v("\n                    "+e._s(e.$t("plan_config.delete_label"))+"\n                  ")])])],1)],1)]}}])})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.taskDialog[e.dialogType],visible:e.dialogFormVisible,"close-on-click-modal":!1,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){return e.cancelOperate()}}},[a("el-form",{ref:"taskForm",attrs:{"label-width":"120px",model:e.taskForm,rules:e.rules,inline:!0}},[a("el-form-item",{attrs:{label:"计划名称",prop:"PlanName"}},[a("el-input",{staticStyle:{width:"545px"},attrs:{placeholder:"请输入计划名称",disabled:e.taskForm.isDetail},model:{value:e.taskForm.PlanName,callback:function(t){e.$set(e.taskForm,"PlanName",t)},expression:"taskForm.PlanName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"计划类型",prop:"PlanType"}},[a("el-select",{attrs:{placeholder:"请选择计划类型",disabled:e.taskForm.isDetail||e.taskForm.isEdit,clearable:""},model:{value:e.taskForm.PlanType,callback:function(t){e.$set(e.taskForm,"PlanType",t)},expression:"taskForm.PlanType"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"巡检计划模板",prop:"TaskTemplateID"}},[a("el-select",{attrs:{disabled:e.taskForm.isDetail,placeholder:"请选择巡检计划模板",clearable:""},model:{value:e.taskForm.TaskTemplateID,callback:function(t){e.$set(e.taskForm,"TaskTemplateID",t)},expression:"taskForm.TaskTemplateID"}},e._l(e.processOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"执行方式",prop:"ExecuteType"}},[a("el-select",{attrs:{disabled:e.taskForm.isDetail,placeholder:"请选择执行方式",clearable:""},model:{value:e.taskForm.ExecuteType,callback:function(t){e.$set(e.taskForm,"ExecuteType",t)},expression:"taskForm.ExecuteType"}},e._l(e.runTypeList,(function(e){return a("el-option",{key:e.Code+e.Desc,attrs:{label:e.Desc,value:e.Code}})})),1)],1),e._v(" "),e.selectRobotFlag?a("el-form-item",{attrs:{label:"机器人",prop:"CarrierID"}},[a("el-select",{attrs:{placeholder:"请选择机器人",disabled:e.taskForm.isDetail,clearable:""},model:{value:e.taskForm.CarrierID,callback:function(t){e.$set(e.taskForm,"CarrierID",t)},expression:"taskForm.CarrierID"}},e._l(e.carOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),[3!==e.taskForm.PlanType?[2!==e.taskForm.PlanType?a("el-form-item",{staticClass:"formSelect1",attrs:{label:"执行频率",prop:"FrequencyType"}},[a("el-select",{staticStyle:{width:"187px"},attrs:{disabled:e.taskForm.isDetail,placeholder:"请选择执行频率",clearable:""},on:{change:function(t){return e.frequencyTypeChange(e.taskForm.FrequencyType)}},model:{value:e.taskForm.FrequencyType,callback:function(t){e.$set(e.taskForm,"FrequencyType",t)},expression:"taskForm.FrequencyType"}},e._l(e.frequencyTypeList,(function(e){return a("el-option",{key:e.Code+e.Desc,attrs:{label:e.Desc,value:e.Code}})})),1)],1):e._e(),e._v(" "),2!==e.taskForm.PlanType?a("el-form-item",{staticClass:"formSelect",attrs:{prop:"FrequencyCount"}},[[2==e.taskForm.FrequencyType?[a("el-select",{attrs:{disabled:e.taskForm.isDetail,placeholder:"请选择执行日期",clearable:""},model:{value:e.taskForm.FrequencyCount,callback:function(t){e.$set(e.taskForm,"FrequencyCount",t)},expression:"taskForm.FrequencyCount"}},e._l(e.option1,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]:3==e.taskForm.FrequencyType?[a("el-select",{attrs:{disabled:e.taskForm.isDetail,placeholder:"请选择执行日期",clearable:""},model:{value:e.taskForm.FrequencyCount,callback:function(t){e.$set(e.taskForm,"FrequencyCount",t)},expression:"taskForm.FrequencyCount"}},e._l("1111111111111111111111111111111".split(""),(function(e,t){return a("el-option",{key:t,attrs:{label:t+1+"号",value:t+1}})})),1)]:e._e()]],2):e._e(),e._v(" "),2!==e.taskForm.PlanType?a("el-form-item",{attrs:{label:"执行时间",prop:"OpenTime"}},[a("el-time-picker",{staticStyle:{width:"205px","margin-left":"2px"},attrs:{disabled:e.taskForm.isDetail,placeholder:"任意时间点","value-format":"HH:mm",format:"HH:mm"},model:{value:e.taskForm.OpenTime,callback:function(t){e.$set(e.taskForm,"OpenTime",t)},expression:"taskForm.OpenTime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"执行次数",prop:"ExecuteCount"}},[a("el-input",{staticStyle:{width:"205px"},attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}",disabled:e.taskForm.isDetail},model:{value:e.taskForm.ExecuteCount,callback:function(t){e.$set(e.taskForm,"ExecuteCount",e._n(t))},expression:"taskForm.ExecuteCount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"执行间隔(分钟)",prop:"ExecuteSpace"}},[a("el-input",{staticStyle:{width:"205px"},attrs:{disabled:e.taskForm.isDetail},model:{value:e.taskForm.ExecuteSpace,callback:function(t){e.$set(e.taskForm,"ExecuteSpace",e._n(t))},expression:"taskForm.ExecuteSpace"}})],1)]:[a("el-form-item",{attrs:{label:"开始时间",prop:"StartTime"}},[a("el-date-picker",{staticStyle:{width:"205px"},attrs:{disabled:e.taskForm.isDetail,placeholder:"请选择开始时间",type:"datetime","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm"},model:{value:e.taskForm.StartTime,callback:function(t){e.$set(e.taskForm,"StartTime",t)},expression:"taskForm.StartTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"EndTime"}},[a("el-date-picker",{staticStyle:{width:"205px"},attrs:{disabled:e.taskForm.isDetail,placeholder:"请选择结束时间",type:"datetime","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm"},model:{value:e.taskForm.EndTime,callback:function(t){e.$set(e.taskForm,"EndTime",t)},expression:"taskForm.EndTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"执行间隔(分钟)",prop:"ExecuteSpace"}},[a("el-input",{attrs:{disabled:e.taskForm.isDetail},model:{value:e.taskForm.ExecuteSpace,callback:function(t){e.$set(e.taskForm,"ExecuteSpace",e._n(t))},expression:"taskForm.ExecuteSpace"}})],1)]],e._v(" "),a("el-form-item",{attrs:{label:"是否启用",prop:"IsEnable"}},[a("el-radio-group",{model:{value:e.taskForm.IsEnable,callback:function(t){e.$set(e.taskForm,"IsEnable",t)},expression:"taskForm.IsEnable"}},[a("el-radio",{attrs:{disabled:e.taskForm.isDetail,label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{disabled:e.taskForm.isDetail,label:2}},[e._v("否")])],1)],1),e._v(" "),1===e.taskForm.PlanType?a("el-form-item",[a("span",{staticStyle:{color:"#f56c6c","margin-left":"55px"}},[e._v("同一小车设置启动时间间隔不能小于1小时")])]):e._e(),e._v(" "),e.taskForm.isDetail?e._e():a("el-form-item",{staticClass:"common-form-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addSuccess}},[e._v(e._s(e.$t("inspection_setting.sure_add_label")))]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.cancelOperate()}}},[e._v(e._s(e.$t("inspection_setting.cancel_add_label")))])],1)],2)],1)],1)},n=[],i=(a("ac6a"),a("c7eb")),l=(a("96cf"),a("1da1")),o=a("5530"),c=a("0dbe"),s=a("f914"),u=a("2f62"),p=["1#凝结水泵","中压蒸汽发生器","碱液储罐","充电屋"],d={data:function(){return{planType:"",keyWord:"",inquireVal:"",planTaskArr:[],dialogFormVisible:!1,options:[],carOptions:[],processOptions:[],robotTypeOption:[],dialogType:"",dialogDetailFlag:!1,detailForm:{excutes:"",cycle:"",endTime:"",openTime:""},taskDialog:{addTimedTask:this.$t("plan_config.addTimedTask_label"),editTimedTask:this.$t("plan_config.editTimedTask_label"),detail:"巡检计划详情"},option1:[{value:1,label:"周一"},{value:2,label:"周二"},{value:3,label:"周三"},{value:4,label:"周四"},{value:5,label:"周五"},{value:6,label:"周六"},{value:7,label:"周日"}],taskForm:{PlanName:"",PlanType:"",TaskTemplateID:"",ExecuteType:"",FrequencyType:1,ExecuteCount:1,ExecuteSpace:0,OpenTime:"",IsEnable:1,CarrierID:"",FrequencyCount:1,StartTime:"",EndTime:""},rules:{PlanName:[{required:!0,message:"请输入计划名称",trigger:"blur"}],TaskTemplateID:[{required:!0,message:"请选择任务选择",trigger:"change"}],PlanType:[{required:!0,message:"请选择计划类型",trigger:"change"}],ExecuteType:[{required:!0,message:"请选择执行方式",trigger:"change"}],CarrierID:[{required:!0,message:"请选择小车",trigger:"change"}],FrequencyType:[{required:!0,message:"请输入执行频率",trigger:"change"}],ExecuteCount:[{required:!0,message:"请输入执行次数",trigger:"change"}],OpenTime:[{required:!0,message:"请选择启动时间",trigger:"change"}],FrequencyCount:[{required:!0,message:"请输入执行日期",trigger:"change"}],StartTime:[{required:!0,message:"请输入开始时间",trigger:"change"}],EndTime:[{required:!0,message:"请输入结束时间",trigger:"change"}]},currentRobot:"",currentInspectPoint:"",checkAll:!1,checkedPoints:[],points:p,isIndeterminate:!0,currentRow:null,ID:0,selectRobotFlag:!0,runTypeList:[],enableList:[],frequencyTypeList:[]}},computed:Object(o["a"])({},Object(u["b"])(["planTasks"])),watch:{"taskForm.executeWay":{handler:function(e,t){e!=t&&(0===e?this.selectRobotFlag=!0:1===e&&(this.selectRobotFlag=!1))},deep:!0,immediate:!0}},mounted:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return e.next=4,this.initCarrierType();case 4:return e.next=6,this.initCarOption();case 6:return e.next=8,this.initTaskList();case 8:return e.next=10,this.initPlanList();case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{init:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){var t,a,r,n;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.options=[],Object(c["k"])().then((function(e){for(var a=e.data,r=0,n=a.length;r<n;r++){var i={value:a[r].Code,label:a[r].Desc};t.options.push(i)}})).catch((function(e){t.$notify({title:t.$t("user.Failure"),message:t.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})})),e.next=5,Object(c["m"])();case 5:return a=e.sent,2e4===a.code&&(this.runTypeList=a.data||[]),e.next=9,Object(c["q"])();case 9:return r=e.sent,2e4===r.code&&(t.enableList=r.data||[]),e.next=13,Object(c["n"])();case 13:n=e.sent,2e4===n.code&&(t.frequencyTypeList=n.data||[]);case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initCarrierType:function(){var e=this;e.robotTypeOption=[],Object(c["l"])().then((function(t){for(var a=t.data,r=0,n=a.length;r<n;r++){var i={value:a[r].dicCode,label:a[r].dataDescription};e.robotTypeOption.push(i)}})).catch((function(t){e.$notify({title:e.$t("user.Failure"),message:e.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))},initCarOption:function(){var e=this;e.carOptions=[],Object(s["m"])({keyWord:""}).then((function(t){for(var a=t.data,r=0,n=a.length;r<n;r++){var i={label:a[r].CarrierName,value:a[r].CarrierID,carType:a[r].CarrierType};e.carOptions.push(i)}})).catch((function(t){e.$notify({title:e.$t("user.Failure"),message:e.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))},initPlanList:function(){var e=this,t=this;t.planTaskArr=[];var a=t.keyWord,r=t.planType;Object(c["i"])({keyWord:a,planType:r||-1}).then((function(a){var r=a.data||[];console.log("查看巡检计划",r),r.length&&r.forEach((function(e){t.runTypeList.forEach((function(t){e.ExecuteType==t.Code&&(e.executeTypeName=t.Desc||"")})),t.options.forEach((function(t){e.PlanType==t.value&&(e.plantypeName=t.label||"")})),1===e.PlanType?t.frequencyTypeList.forEach((function(t){if(e.FrequencyType==t.Code){var a="";switch(e.FrequencyType){case 1:a=t.Desc;break;case 2:var r="";switch(e.FrequencyCount){case 1:r="一";break;case 2:r="二";break;case 3:r="三";break;case 4:r="四";break;case 5:r="五";break;case 6:r="六";break;case 7:r="日";break;default:break}a=t.Desc+r;break;case 3:a=t.Desc+e.FrequencyCount+"号";break;default:break}e.frequencyTypeName=a}})):e.frequencyTypeName="--",t.enableList.forEach((function(t){e.IsEnable==t.Code&&(e.isEnableName=t.Desc||"")})),e.OpenTime&&(e.OpenTime="1999-01-01 "+e.OpenTime)})),e.$store.dispatch("global/setPlanTasks",r||[])})).catch((function(e){t.$notify({title:t.$t("user.Failure"),message:t.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))},initTaskList:function(){var e=this;this.processOptions=[],Object(c["o"])().then((function(t){for(var a=t.data,r=0,n=a.length;r<n;r++){var i={value:a[r].id,label:a[r].taskName};e.processOptions.push(i)}})).catch((function(){e.$notify({title:e.$t("user.Failure"),message:e.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))},addTimedTask:function(e,t){var a=this;this.dialogFormVisible=!0,1===t?(this.taskForm={isEdit:!1,PlanName:"",PlanType:"",TaskTemplateID:"",ExecuteType:"",FrequencyType:1,ExecuteCount:1,ExecuteSpace:0,OpenTime:"",IsEnable:1,CarrierID:"",FrequencyCount:1,StartTime:"",EndTime:""},this.dialogType="addTimedTask"):2===t&&(this.dialogType="editTimedTask",this.taskForm=Object(o["a"])({isEdit:!0},e)),3===t?(this.dialogType="detail",this.taskForm=Object(o["a"])({isDetail:!0},e)):this.taskForm.isDetail=!1,this.$nextTick((function(){a.$refs.taskForm.clearValidate()}))},addSuccess:function(){var e=this,t=this;this.$refs.taskForm.validate((function(a){if(!a)return!1;var r=t.taskForm,n=r.PlanName,i=r.PlanType,l=r.TaskTemplateID,o=r.ExecuteType,s=r.FrequencyType,u=r.ExecuteCount,p=r.ExecuteSpace,d=r.OpenTime,m=r.IsEnable,f=r.CarrierID,b=r.FrequencyCount,y=r.isEdit,T=r.PlanID,h=r.StartTime,k=r.EndTime,v=d;v&&5===v.length&&(v="1999-01-01 "+v+":00");var g={planName:n,planType:i,taskTemplateID:l,executeType:o,carrierID:f,executeCount:u,frequencyType:s,frequencyCount:b,openTime:v?new Date(v):"",executeSpace:p,isEnable:m,startTime:h?new Date(h+":00"):"",endTime:k?new Date(k+":00"):""};Date.parse(g.startTime)>Date.parse(g.endTime)?t.$notify({title:"提示",message:"开始时间不能大于结束时间",type:"warning",duration:1e3}):Date.parse(g.startTime)+6e5<Date.now()?t.$notify({title:"提示",message:"开始应大于当前时间",type:"warning",duration:1e3}):y?(g.planID=T,Object(c["u"])(g).then((function(a){a.data;2e4===a.code&&(t.initPlanList(),t.cancelOperate(),e.$notify({title:e.$t("user.Success"),message:e.$t("user.Update_Success"),type:"success",duration:1e3}))})).catch((function(e){t.$notify({title:t.$t("user.Failure"),message:t.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))):Object(c["c"])(g).then((function(a){2e4===a.code&&(t.initPlanList(),t.cancelOperate(),t.$notify({title:t.$t("user.Success"),message:t.$t("user.Create_Success"),type:"success",duration:1e3}),e.taskForm={PlanName:"",PlanType:"",TaskTemplateID:"",ExecuteType:"",FrequencyCount:1,ExcuteCount:1,ExcuteSpace:1,OpenTime:"",IsEnable:!1,CarrierID:"",StartTime:"",EndTime:""})})).catch((function(e){t.$notify({title:t.$t("user.Failure"),message:t.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))}))},cancelOperate:function(e){this.dialogFormVisible=!1,this.taskForm={timedName:"",robotName:"",processName:"",executeWay:"",mapShowName:"",enableType:!1,excutes:"",cycle:"",endTime:"",openTime:""}},deleteTimedTask:function(e){var t=this,a=this;e&&this.$confirm(a.$t("public_vary.delete_operate_tip"),a.$t("public_vary.warning_tip"),{confirmButtonText:a.$t("public_vary.sure_label"),cancelButtonText:a.$t("public_vary.cancel_label"),type:"warning"}).then((function(){Object(c["f"])({ID:e.PlanID}).then((function(e){2e4===e.code&&(t.$notify({type:"success",message:"删除成功！",title:"提示",duration:1e3}),a.initPlanList())})).catch((function(e){a.$notify({title:a.$t("user.Failure"),message:a.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))})).catch((function(){}))},stopTask:function(e){var t=this;this.$confirm("确定要终止该任务吗, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(Object(i["a"])().mark((function a(){var r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.PlanID){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,Object(c["s"])(e.PlanID);case 4:r=a.sent,2e4===r.code&&(t.$notify({type:"success",message:r.data,title:"提示",duration:1e3}),t.initPlanList());case 6:case"end":return a.stop()}}),a)})))).catch((function(){}))},startTask:function(e){var t=this;this.$confirm("确定要启动该任务吗, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(Object(i["a"])().mark((function a(){var r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.PlanID){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,Object(c["r"])(e.PlanID);case 4:r=a.sent,2e4===r.code&&t.$notify({type:"success",message:"任务已启动!",title:"提示",duration:1e3});case 6:case"end":return a.stop()}}),a)})))).catch((function(e){console.log("查看启动失败原因",e)}))},frequencyTypeChange:function(e){e&&1!==e||this.$refs.taskForm.clearValidate("FrequencyCount")}}},m=d,f=(a("a983"),a("2877")),b=Object(f["a"])(m,r,n,!1,null,"fe7a4ff4",null);t["default"]=b.exports},a983:function(e,t,a){"use strict";a("d3fd")},d3fd:function(e,t,a){},f914:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"r",(function(){return i})),a.d(t,"z",(function(){return l})),a.d(t,"m",(function(){return o})),a.d(t,"a",(function(){return c})),a.d(t,"e",(function(){return s})),a.d(t,"A",(function(){return u})),a.d(t,"g",(function(){return p})),a.d(t,"h",(function(){return d})),a.d(t,"f",(function(){return m})),a.d(t,"v",(function(){return f})),a.d(t,"i",(function(){return b})),a.d(t,"l",(function(){return y})),a.d(t,"j",(function(){return T})),a.d(t,"x",(function(){return h})),a.d(t,"t",(function(){return k})),a.d(t,"u",(function(){return v})),a.d(t,"o",(function(){return g})),a.d(t,"b",(function(){return _})),a.d(t,"C",(function(){return F})),a.d(t,"d",(function(){return O})),a.d(t,"k",(function(){return x})),a.d(t,"n",(function(){return P})),a.d(t,"B",(function(){return C})),a.d(t,"y",(function(){return D})),a.d(t,"q",(function(){return w})),a.d(t,"p",(function(){return j}));var r=a("b775");function n(e,t){return Object(r["b"])({url:"/api/Vcu/CarrierMoveSwitch?Switch="+e+"&SendTime="+t,method:"post",data:{}})}function i(e,t,a,n){return Object(r["b"])({url:"/api/Vcu/Move?Direct="+e+"&Speed="+t+"&Span="+a+"&SendTime="+n,method:"post",data:{}})}function l(e){return Object(r["b"])({url:"/api/Vcu/StopAGV?SendTime="+e,method:"post",data:{}})}function o(e){return Object(r["a"])({url:"/api/CarrierSet/getCarrierList",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/api/CarrierSet/addCarrier",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/api/CarrierSet/deleteCarrier",method:"post",params:{ID:e}})}function u(e){return Object(r["a"])({url:"/api/CarrierSet/updateCarrier",method:"post",data:e})}function p(){return Object(r["a"])({url:"/api/Accessory/getAccessoryTypeList",method:"get"})}function d(e){return Object(r["a"])({url:"/api/Accessory/getAccessoryListByType?accessoryType="+e,method:"post"})}function m(){return Object(r["a"])({url:"/api/CarrierSet/getActionTypeList",method:"get"})}function f(e){return Object(r["a"])({url:"/api/CarrierAccessory/SaveCarrierAccessory",method:"post",data:e})}function b(e){return Object(r["a"])({url:"/api/CarrierAccessory/GetCarrierAccessoryList",method:"post",params:{carrierID:e}})}function y(e){return Object(r["a"])({url:"/api/Area/SearchArea",method:"post",data:e})}function T(){return Object(r["a"])({url:"/api/CarrierGroup/GetAllCarrierDetailInfo",method:"get"})}function h(e){return Object(r["a"])({url:"/api/CarrierGroup/RemoteSwitch",method:"post",data:e})}function k(e){return Object(r["a"])({url:"/api/CarrierGroup/RemoteControl",method:"post",data:e})}function v(e){return Object(r["a"])({url:"/api/CarrierGroup/RemoteStop",method:"post",data:e})}function g(e){return Object(r["a"])({url:"/api/DVR/GetList",method:"post",data:e})}function _(e){return Object(r["a"])({url:"/api/DVR/Insert",method:"post",data:e})}function F(e){return Object(r["a"])({url:"/api/DVR/Update",method:"post",data:e})}function O(e){return Object(r["a"])({url:"/api/DVR/Delete",method:"post",params:e})}function x(){return Object(r["a"])({url:"/api/DVR/GetDVRBrandList",method:"get"})}function P(){return Object(r["a"])({url:"/api/DVR/GetCameraList",method:"get"})}function C(e){return Object(r["a"])({url:"/api/DVR/UpdateDetails",method:"post",data:e})}function D(e){return Object(r["a"])({url:"/api/HKControl/voiceCall",method:"post",data:e})}function w(e){return Object(r["a"])({url:"/api/HKControl/Login",method:"post",data:e})}function j(e){return Object(r["a"])({url:"/api/HKControl/LoginOut",method:"get",data:e})}}}]);