(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6da3fb8c"],{"333d":function(e,a,t){"use strict";var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[t("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(a){e.currentPage=a},"update:current-page":function(a){e.currentPage=a},"update:pageSize":function(a){e.pageSize=a},"update:page-size":function(a){e.pageSize=a},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},r=[];t("c5f6");Math.easeInOutQuad=function(e,a,t,l){return e/=l/2,e<1?t/2*e*e+a:(e--,-t/2*(e*(e-2)-1)+a)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,a,t){var l=o(),r=e-l,s=20,c=0;a="undefined"===typeof a?500:a;var u=function e(){c+=s;var o=Math.easeInOutQuad(c,l,r,a);n(o),c<a?i(e):t&&"function"===typeof t&&t()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},u=c,m=(t("9567"),t("2877")),p=Object(m["a"])(u,l,r,!1,null,"2fa86365",null);a["a"]=p.exports},51209:function(e,a,t){},9567:function(e,a,t){"use strict";t("c54f")},a1c6:function(e,a,t){"use strict";t("51209")},c54f:function(e,a,t){},cc38:function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticStyle:{padding:"1%"}},[t("div",{staticClass:"robot-header content-header"},[t("div",{staticClass:"alarm-setting-inquire"},[t("el-select",{attrs:{clearable:"",placeholder:"请选择告警类型",size:"mini"},model:{value:e.alarmType,callback:function(a){e.alarmType=a},expression:"alarmType"}},e._l(e.alarmTypeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),t("el-select",{staticClass:"access-select",attrs:{placeholder:"请选择告警级别",clearable:"",size:"mini"},model:{value:e.alarmLevel1,callback:function(a){e.alarmLevel1=a},expression:"alarmLevel1"}},e._l(e.alarmLevelOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),t("el-select",{attrs:{placeholder:"请选择设备类型",clearable:"",size:"mini"},model:{value:e.equipmentType,callback:function(a){e.equipmentType=a},expression:"equipmentType"}},e._l(e.equipmentTypeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),t("el-button",{staticStyle:{margin:"0px"},attrs:{type:"success",size:"mini"},on:{click:function(a){return e.init()}}},[e._v(e._s(e.$t("alarm_setting.inquire_label")))]),e._v(" "),t("el-button",{staticClass:"robot-operate",staticStyle:{"margin-left":"51vw"},attrs:{type:"success",size:"mini"},on:{click:function(a){return e.addAlarmWindow()}}},[e._v(e._s(e.$t("alarm_setting.addAlarm_label")))])],1)]),e._v(" "),t("div",{staticClass:"robot-body content-body"},[t("el-table",{staticClass:"warn-data",attrs:{data:e.alarmInfoArr,"header-row-class-name":"header-row-class","row-class-name":"row-class",fit:"",size:"small"}},[t("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"150"}}),e._v(" "),t("el-table-column",{attrs:{prop:"alarmID",label:e.$t("alarm_setting.alarmID_label"),align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row;return[t("span",[e._v(e._s(l.alarmCode))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"alarmName",label:e.$t("alarm_setting.alarm_name_label"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row;return[t("span",[e._v(e._s(l.alarmName))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"alarmType",label:e.$t("alarm_setting.alarm_type_label"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row;return[t("span",[e._v(e._s(l.typeName))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"equipmentType",label:e.$t("alarm_setting.equipment_type_label"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row;return[t("span",[e._v(e._s(l.deviceName))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"alarmLevel",label:e.$t("alarm_setting.alarmLevel_label"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row;return[t("span",[e._v(e._s(l.levelName))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"alarmProduce",label:e.$t("alarm_setting.alarm_produce_label"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row;return[t("span",[e._v(e._s(l.alarmProduce))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"alarmRepair",label:e.$t("alarm_setting.alarm_repair_label"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row;return[t("span",[e._v(e._s(l.alarmRepair))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"",label:"操作",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row;return[t("el-button",{staticClass:"robot-operate",attrs:{type:"primary",icon:"el-icon-setting",size:"mini"},on:{click:function(a){return e.configAccesso(l)}}},[e._v(e._s(e.$t("alarm_setting.correlation_operate_label")))]),e._v(" "),t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",plain:""},on:{click:function(a){return e.editAlarm(l)}}},[e._v(e._s(e.$t("plan_config.edit_label")))]),e._v(" "),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.deleteAlarmSetting(l)}}},[e._v(e._s(e.$t("plan_config.delete_label")))])]}}])})],1),e._v(" "),t("div",[t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page,limit:e.limit},on:{"update:page":function(a){e.page=a},"update:limit":function(a){e.limit=a},pagination:e.init}})],1)],1),e._v(" "),t("el-dialog",{staticClass:"dialog-class",attrs:{title:"addAlarmTask"==e.dialogType?e.$t("alarm_setting.addAlarm_label"):e.$t("alarm_setting.editAlarm_label"),visible:e.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(a){e.dialogFormVisible=a},close:function(a){return e.cancel()}}},[t("el-form",{ref:"alarmForm",staticClass:"common-form",staticStyle:{"margin-left":"13%"},attrs:{"label-width":"120px",model:e.alarmForm,rules:e.rules}},[t("el-form-item",{attrs:{label:e.$t("alarm_setting.alarmID_label"),"label-width":e.formLabelWidth,prop:"alarmCode"}},[t("el-input",{attrs:{placeholder:"请输入告警码",oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.alarmForm.alarmCode,callback:function(a){e.$set(e.alarmForm,"alarmCode",a)},expression:"alarmForm.alarmCode"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("alarm_setting.alarm_name_label"),"label-width":e.formLabelWidth,prop:"alarmName"}},[t("el-input",{attrs:{placeholder:"请输入告警名称"},model:{value:e.alarmForm.alarmName,callback:function(a){e.$set(e.alarmForm,"alarmName",a)},expression:"alarmForm.alarmName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("alarm_setting.alarm_type_label"),"label-width":e.formLabelWidth,prop:"alarmType"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择告警类型"},model:{value:e.alarmForm.alarmType,callback:function(a){e.$set(e.alarmForm,"alarmType",a)},expression:"alarmForm.alarmType"}},e._l(e.alarmTypeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("alarm_setting.equipment_type_label"),"label-width":e.formLabelWidth,prop:"equipmentType"}},[t("el-select",{attrs:{placeholder:"请选择设备类型",clearable:""},model:{value:e.alarmForm.equipmentType,callback:function(a){e.$set(e.alarmForm,"equipmentType",a)},expression:"alarmForm.equipmentType"}},e._l(e.equipmentTypeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("alarm_setting.alarmLevel_label"),"label-width":e.formLabelWidth,prop:"alarmLevel"}},[t("el-select",{attrs:{placeholder:"请选择告警级别",clearable:""},model:{value:e.alarmForm.alarmLevel,callback:function(a){e.$set(e.alarmForm,"alarmLevel",a)},expression:"alarmForm.alarmLevel"}},e._l(e.alarmLevelOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("alarm_setting.alarm_produce_label"),"label-width":e.formLabelWidth,prop:"alarmProduce"}},[t("el-input",{attrs:{placeholder:"请输入告警上下值",oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.alarmForm.alarmProduce,callback:function(a){e.$set(e.alarmForm,"alarmProduce",a)},expression:"alarmForm.alarmProduce"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("alarm_setting.alarm_repair_label"),"label-width":e.formLabelWidth,prop:"alarmRepair"}},[t("el-input",{attrs:{placeholder:"请输入告警下限值",oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.alarmForm.alarmRepair,callback:function(a){e.$set(e.alarmForm,"alarmRepair",a)},expression:"alarmForm.alarmRepair"}})],1),e._v(" "),t("el-form-item",{staticClass:"common-form-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){"addAlarmTask"===e.dialogType?e.addSuccess(e.alarmForm):e.editSuccess(e.alarmForm)}}},[e._v(e._s(e.$t("inspection_setting.sure_add_label")))]),e._v(" "),t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(a){return e.cancel("alarmForm")}}},[e._v(e._s(e.$t("inspection_setting.cancel_add_label")))])],1)],1)],1),e._v(" "),t("el-dialog",{staticClass:"access-dialog",attrs:{title:e.$t("alarm_setting.add_label"),visible:e.dialogAccessFlag,"close-on-click-modal":!1,width:"80%"},on:{"update:visible":function(a){e.dialogAccessFlag=a},close:function(a){return e.closeDetail()}}},[t("div",{staticStyle:{"margin-bottom":"20px","font-size":"13px"}},[t("span",[e._v(e._s(e.$t("alarm_setting.alarmLevel_label"))+":")]),e._v(" "),t("el-select",{staticClass:"access-select",attrs:{placeholder:"请选择告警级别",clearable:""},model:{value:e.alarmLevel,callback:function(a){e.alarmLevel=a},expression:"alarmLevel"}},e._l(e.alarmLevelOptions,(function(e){return t("el-option",{key:e.value,attrs:{disabled:e.disabled,label:e.label,value:e.value}})})),1),e._v("\n       \n      "),t("span",[e._v(e._s(e.$t("alarm_setting.process_mode_label"))+":")]),e._v(" "),t("el-select",{staticClass:"access-select",attrs:{placeholder:"请选择处理方式",clearable:""},model:{value:e.processMode,callback:function(a){e.processMode=a},expression:"processMode"}},e._l(e.processModeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v("\n       \n      "),t("span",[e._v(e._s(e.$t("alarm_setting.upper_limit_label"))+":")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入上限值",onkeyup:"value=value.replace(/[\\u4E00-\\u9FA5]|[A-Za-z]/g,'')"},model:{value:e.upperLimit,callback:function(a){e.upperLimit=a},expression:"upperLimit"}}),e._v("\n       \n      "),t("span",[e._v(e._s(e.$t("alarm_setting.lower_limit_label"))+":")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入下限值",onkeyup:"value=value.replace(/[\\u4E00-\\u9FA5]|[A-Za-z]/g,'')"},model:{value:e.lowerLimit,callback:function(a){e.lowerLimit=a},expression:"lowerLimit"}}),e._v("\n       \n      "),t("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return e.addDetail()}}},[e._v(e._s(e.$t("alarm_setting.add_label")))]),e._v(" "),t("br")],1),e._v(" "),t("div",{staticClass:"content-body"},[t("el-table",{staticClass:"charge-data",attrs:{data:e.detailInfoArr,"header-row-class-name":"header-row-class","row-class-name":"row-class",fit:"","highlight-current-row":"",size:"mini"}},[t("el-table-column",{attrs:{prop:"alarmLevel",label:e.$t("alarm_setting.alarmLevel_label"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row;return[t("span",[e._v(e._s(l.levelName))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"processMode",label:e.$t("alarm_setting.process_mode_label"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row;return[t("span",[e._v(e._s(l.modeName))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"upperLimit",label:e.$t("alarm_setting.upper_limit_label"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row;return[t("span",[e._v(e._s(l.upperLimit))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"lowerLimit",label:e.$t("alarm_setting.lower_limit_label"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row;return[t("span",[e._v(e._s(l.lowerLimit))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"operate",label:"操作",align:"center",width:"90"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(t){return e.deleteRow(a.$index,e.detailInfoArr)}}},[e._v(e._s(e.$t("charge_config.delete_label")))])]}}])})],1)],1),e._v(" "),t("div",{staticClass:"detail-dialog-footer",staticStyle:{"margin-top":"10px"}},[t("el-button",{attrs:{size:"mini"},on:{click:e.addDetailSuccess}},[e._v(e._s(e.$t("plan_config.sure_label")))])],1)])],1)},r=[],i=t("5530"),n=(t("c5f6"),t("ac6a"),t("7514"),t("b775"));function o(e){return Object(n["a"])({url:"/api/AlarmSet/getAlarmSetList",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/api/AlarmSet/addAlarmSet",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/api/AlarmSet/updateAlarmSet",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/api/AlarmSet/deleteAlarmSet",method:"post",params:{ID:e}})}function m(){return Object(n["a"])({url:"/api/AlarmSet/getAlarmTypeList",method:"get"})}function p(){return Object(n["a"])({url:"/api/AlarmSet/getDeviceTypeList",method:"get"})}function d(){return Object(n["a"])({url:"/api/AlarmRecord/getAlarmLevelList",method:"get"})}function f(){return Object(n["a"])({url:"/api/AlarmSetDetail/getDealModeList",method:"get"})}function v(e){return Object(n["a"])({url:"/api/AlarmSetDetail/getAlarmSetDetailList",method:"post",params:e})}function g(e){return Object(n["a"])({url:"/api/AlarmSetDetail/saveAlarmSetDetail",method:"post",data:e})}var _=t("333d"),b={components:{Pagination:_["a"]},data:function(){return{alarmType:"",alarmLevel1:"",equipmentType:"",alarmInfoArr:[],dialogFormVisible:!1,formLabelWidth:"110px",dialogType:"",alarmForm:{id:"",alarmCode:"",alarmName:"",alarmType:"",equipmentType:"",alarmLevel:"",alarmArea:"",alarmProduce:"",alarmRepair:""},alarmTypeOptions:[],equipmentTypeOptions:[],alarmLevelOptions:[],rules:{alarmCode:[{required:!0,message:"请输入报警码",trigger:"change"}],alarmName:[{required:!0,message:"请输入报警名称",trigger:"change"}],alarmType:[{required:!0,message:"请选择报警类型",trigger:"change"}],equipmentType:[{required:!0,message:"请选择设备类型",trigger:"change"}],alarmLevel:[{required:!0,message:"请选择报警级别",trigger:"change"}],alarmArea:[{required:!0,message:"请输入报警区域",trigger:"change"}],alarmProduce:[{required:!0,message:"请输入报警产生门限",trigger:"change"}],alarmRepair:[{required:!0,message:"请输入报警修复门限",trigger:"change"}]},dialogAccessFlag:!1,alarmLevel:"",processMode:"",upperLimit:"",lowerLimit:"",processModeOptions:[],detailInfoArr:[],ID:"",total:0,page:1,limit:10,totalDetail:0,pageDetail:1,limitDetail:10}},mounted:function(){this.initSelect()},methods:{init:function(){var e=this,a={current:e.page,limit:e.limit,alarmType:e.alarmType||-1,alarmLevel:e.alarmLevel1||-1,deviceType:""!==e.equipmentType?e.equipmentType:-1};o(a).then((function(a){e.total=a.data.total;var t=(a.data||{}).records;if(e.alarmInfoArr=[],t.length)for(var l=function(a,l){var r=e.alarmLevelOptions.find((function(e){return e.value===t[a].AlarmLevel})).label,i=e.alarmTypeOptions.find((function(e){return e.value===t[a].AlarmType})).label,n=e.equipmentTypeOptions.find((function(e){return e.value===t[a].DeviceType})).label,o={id:t[a].ID,alarmID:t[a].ID,alarmCode:t[a].AlarmCode,alarmName:t[a].AlarmName,alarmType:t[a].AlarmType,typeName:i,equipmentType:t[a].DeviceType,deviceName:n,alarmLevel:t[a].AlarmLevel,levelName:r,alarmProduce:t[a].OccurThreshold,alarmRepair:t[a].RecoveryThreshold};e.alarmInfoArr.push(o)},r=0,i=t.length;r<i;r++)l(r,i)})).catch((function(e){}))},initSelect:function(){var e=this;e.alarmTypeOptions=[],e.equipmentTypeOptions=[],e.alarmLevelOptions=[],m().then((function(a){a&&a.data.length&&(e.alarmTypeOptions=[],a.data.forEach((function(a){var t={value:a.Code,label:a.Desc};e.alarmTypeOptions.push(t)})))})).catch((function(){})),p().then((function(a){a&&a.data.length&&(e.equipmentTypeOptions=[],a.data.forEach((function(a){var t={value:a.Code,label:a.Desc};e.equipmentTypeOptions.push(t)})))})).catch((function(){})),d().then((function(a){a&&a.data.length&&(e.alarmLevelOptions=[],a.data.forEach((function(a){var t={value:a.Code,label:a.Desc};e.alarmLevelOptions.push(t)})))})).catch((function(){})),f().then((function(a){a&&a.data.length&&(e.processModeOptions=[],a.data.forEach((function(a){var t={value:a.Code,label:a.Desc};e.processModeOptions.push(t)}))),e.init()})).catch((function(){}))},deleteAlarmSetting:function(e){var a=this,t=this;this.$confirm(t.$t("public_vary.delete_operate_tip"),t.$t("public_vary.warning_tip"),{confirmButtonText:t.$t("public_vary.sure_label"),cancelButtonText:t.$t("public_vary.cancel_label"),type:"warning"}).then((function(){var l=e.id;u(l).then((function(e){e.data;2e4===e.code&&(t.init(),a.$notify({title:"提示",type:"success",message:"删除成功！",duration:1e3}))})).catch((function(){t.$notify({title:t.$t("user.Failure"),message:t.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))})).catch((function(){}))},addAlarmWindow:function(){this.dialogFormVisible=!0,this.dialogType="addAlarmTask"},addSuccess:function(e){var a=this,t=this;this.$refs.alarmForm.validate((function(l){if(!l)return console.log("error submit!!"),!1;var r={alarmCode:Number(e.alarmCode),alarmName:e.alarmName,alarmType:e.alarmType,deviceType:e.equipmentType,alarmLevel:Number(e.alarmLevel),occurThreshold:Number(e.alarmProduce),recoveryThreshold:Number(e.alarmRepair)};s(r).then((function(e){if(2e4===e.code){a.cancel();e.data;t.init(),a.$notify({message:"新增成功！",type:"success",duration:1e3,title:"提示"})}})).catch((function(e){a.cancel(),t.$notify({title:t.$t("user.Failure"),message:t.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))}))},editAlarm:function(e){e&&(this.dialogFormVisible=!0,this.dialogType="editAlarmTask",this.alarmForm=Object(i["a"])({},e))},editSuccess:function(e){var a=this,t=this;this.$refs.alarmForm.validate((function(l){if(!l)return console.log("error submit!!"),!1;var r={id:Number(e.id),alarmCode:Number(e.alarmCode),alarmName:e.alarmName,alarmType:e.alarmType,deviceType:e.equipmentType,alarmLevel:Number(e.alarmLevel),occurThreshold:Number(e.alarmProduce),recoveryThreshold:Number(e.alarmRepair)};c(r).then((function(e){2e4===e.code&&(a.cancel(),t.init(),a.$notify({type:"success",message:"修改成功！",title:"提示",duration:1e3}))})).catch((function(e){a.cancel(),t.$notify({title:t.$t("user.Failure"),message:t.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))}))},resetForm:function(){this.alarmForm={id:"",alarmCode:"",alarmName:"",alarmType:"",equipmentType:"",alarmLevel:"",alarmArea:"",alarmProduce:"",alarmRepair:""}},cancel:function(e){this.$refs.alarmForm.resetFields(),this.dialogFormVisible=!1,this.resetForm()},filterLevelOptions:function(){var e=this;this.alarmLevelOptions.length&&this.alarmLevelOptions.forEach((function(a){a.disabled=!1,e.detailInfoArr.length&&e.detailInfoArr.forEach((function(e){a.value===e.alarmLevel&&(a.disabled=!0)}))}))},configAccesso:function(e){var a=this,t=this;this.dialogAccessFlag=!0,this.ID=e.id;var l={alarmSetID:e.id};v(l).then((function(e){t.detailInfoArr=[],t.total=e.total;var l=e.data||[];if(l.length){for(var r=function(e,a){var r=t.alarmLevelOptions.find((function(a){return a.value===l[e].alarmLevel})).label,i=t.processModeOptions.find((function(a){return a.value===l[e].dealMode})).label,n={id:l[e].id,alarmSetID:l[e].alarmSetID,alarmLevel:l[e].alarmLevel,levelName:r,processMode:l[e].dealMode,modeName:i,lowerLimit:l[e].lowValue,upperLimit:l[e].upperValue,noticeRules:l[e].noticeRules,triggerDevices:l[e].triggerDevices};t.detailInfoArr.push(n)},i=0,n=l.length;i<n;i++)r(i,n);a.filterLevelOptions()}})).catch((function(e){console.log(e,"0009998777777777"),t.$notify({title:t.$t("user.Failure"),message:t.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))},addDetail:function(){var e=this;if(""===this.alarmLevel||""===this.processMode||""===this.upperLimit||""===this.lowerLimit)return this.$notify({type:"error",message:"请添加关联数据！",title:"提示",duration:1e3});var a=this.alarmLevelOptions.find((function(a){return a.value===e.alarmLevel})).label,t=this.processModeOptions.find((function(a){return a.value===e.processMode})).label,l={levelName:a,modeName:t,alarmLevel:this.alarmLevel,processMode:this.processMode,upperLimit:this.upperLimit,lowerLimit:this.lowerLimit};this.detailInfoArr.push(l),this.resetDetail(),this.filterLevelOptions()},deleteRow:function(e,a){a.splice(e,1),this.filterLevelOptions()},addDetailSuccess:function(){for(var e=this,a=this,t=[],l=0,r=this.detailInfoArr.length;l<r;l++){var i={alarmLevel:this.detailInfoArr[l].alarmLevel,dealMode:this.detailInfoArr[l].processMode,lowValue:this.detailInfoArr[l].lowerLimit,upperValue:this.detailInfoArr[l].upperLimit,alarmSetID:Number(this.ID)};t.push(i)}var n={alarmSetID:Number(this.ID),detailList:t||[]};g(n).then((function(t){var l=t.data;2e4===t.code&&(a.closeDetail(),e.$notify({title:e.$t("user.Success"),message:e.$t(l),type:"success",duration:1e3}))})).catch((function(e){a.$notify({title:a.$t("user.Failure"),message:a.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))},closeDetail:function(){this.dialogAccessFlag=!1,this.resetDetail()},resetDetail:function(){this.alarmLevel="",this.processMode="",this.upperLimit="",this.lowerLimit=""}}},h=b,y=(t("a1c6"),t("2877")),L=Object(y["a"])(h,l,r,!1,null,"ec7c1af4",null);a["default"]=L.exports}}]);