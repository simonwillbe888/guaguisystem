(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28d46e79"],{2315:function(t,e,n){"use strict";n("e034")},3816:function(t,e,n){"use strict";n.d(e,"h",(function(){return r})),n.d(e,"g",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"i",(function(){return d})),n.d(e,"a",(function(){return p})),n.d(e,"j",(function(){return b}));var a=n("b775");function r(t){return Object(a["a"])({url:"/api/PatrolFile/getPatrolFileList",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/api/PatrolRecord/getPatrolRecordList",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/api/AlarmRecord/getCurrentAlarmRecordList",method:"post",data:t})}function l(){return Object(a["a"])({url:"/api/AlarmRecord/getAlarmStateList",method:"get"})}function c(t){return Object(a["a"])({url:"/api/AlarmRecord/getAlarmRecordList",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/api/AlarmRecord/dealAlarm",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/api/AlarmRecord/getAlarmDealLog",method:"post",params:t})}function d(){return Object(a["a"])({url:"/api/PatrolTask/GetRealPatrolTaskList",method:"get"})}function p(t){return Object(a["a"])({url:"/api/PatrolTask/CancelPatrolTask",method:"post",data:t})}function b(){return Object(a["a"])({url:"/api/PatrolRecord/getPatrolActionTypeList",method:"get"})}},6727:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"power-container"},[n("div",{staticClass:"content-header"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.getTaskList}},[t._v("\n        查询\n      ")])],1),t._v(" "),n("div",{staticClass:"content-body"},[[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.realTimeTasks}},[n("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"carrierName",align:"center",label:"小车名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"planName",align:"center",label:"计划任务名称"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"计划类型"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v("\n              "+t._s(1===n.planType?"实时巡检":2===n.planType?"特别巡检":3===n.planType?"连续巡检":"")+"\n            ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"currentItemSequence",align:"center",label:"当前任务步"}}),t._v(" "),n("el-table-column",{attrs:{prop:"alarmCount",align:"center",label:"告警数量"}}),t._v(" "),n("el-table-column",{attrs:{prop:"startTime",align:"center",label:"开始时间"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.showDialog(a.taskID)}}},[t._v("\n                终止任务\n              ")])]}}])})],1)]],2)]),t._v(" "),n("el-dialog",{attrs:{title:"是否终止关联计划",visible:t.centerDialogVisible,width:"35%",center:"","close-on-click-modal":!1},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.stopTask(!0)}}},[t._v("是")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.stopTask(!1)}}},[t._v("否")]),t._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取消")])],1)])],1)},r=[],i=n("c7eb"),o=(n("96cf"),n("1da1")),l=n("5530"),c=n("3816"),s=n("2f62"),u={data:function(){return{taskList:[],centerDialogVisible:!1,taskId:""}},computed:Object(l["a"])({},Object(s["b"])(["realTimeTasks"])),mounted:function(){this.getTaskList()},methods:{getTaskList:function(){var t=Object(o["a"])(Object(i["a"])().mark((function t(){var e;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["i"])();case 2:e=t.sent,console.log("获取实时任务",e),2e4===e.code&&this.$store.dispatch("global/setRealTimeTasks",e.data||[]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showDialog:function(t){this.centerDialogVisible=!0,this.taskId=t},stopTask:function(){var t=Object(o["a"])(Object(i["a"])().mark((function t(e){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["a"])({needStop:e,taskID:this.taskId});case 2:n=t.sent,2e4===n.code&&(this.$notify({message:n.data,type:"success",title:"提示",duration:1e3}),this.centerDialogVisible=!1,this.getTaskList());case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},d=u,p=(n("2315"),n("2877")),b=Object(p["a"])(d,a,r,!1,null,"410a394a",null);e["default"]=b.exports},e034:function(t,e,n){}}]);