(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95c04d6e"],{"619e":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"content-header"},[r("el-input",{staticStyle:{width:"160px"},attrs:{size:"mini",placeholder:"请输入录像机名称"},model:{value:e.form1.dvrname,callback:function(t){e.$set(e.form1,"dvrname",t)},expression:"form1.dvrname"}}),e._v(" "),r("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择品牌",clearable:""},model:{value:e.form1.dvrbrandCode,callback:function(t){e.$set(e.form1,"dvrbrandCode",t)},expression:"form1.dvrbrandCode"}},e._l(e.options,(function(e){return r("el-option",{key:e.Code,attrs:{label:e.Desc,value:e.Code}})})),1),e._v(" "),r("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"请输入ip地址"},model:{value:e.form1.ip,callback:function(t){e.$set(e.form1,"ip",t)},expression:"form1.ip"}}),e._v(" "),r("el-button",{staticStyle:{"margin-left":"30px"},attrs:{size:"mini"},on:{click:e.getVideoRecords}},[e._v("查询")]),e._v(" "),r("div",{staticClass:"headerBtn"},[r("el-button",{attrs:{size:"mini"},on:{click:e.add}},[e._v("新增录像机配置")])],1)],1),e._v(" "),r("div",{staticClass:"content-body"},[[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.videoRecordList}},[r("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"150"}}),e._v(" "),r("el-table-column",{attrs:{prop:"dvrname",align:"center",label:"录像机名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"dvrcode",align:"center",label:"录像机编号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"ip",align:"center",label:"IP地址"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-button",{attrs:{icon:"el-icon-document",type:"primary",size:"mini",plain:""},on:{click:function(t){return e.edit(n,!0)}}},[e._v("\n              详情\n            ")]),e._v(" "),r("el-button",{staticClass:"robot-operate",attrs:{type:"primary",icon:"el-icon-setting",size:"mini"},on:{click:function(t){return e.connentAdvices(n)}}},[e._v(e._s(e.$t("robot_setting.accessory_operate_label")))]),e._v(" "),r("el-button",{attrs:{icon:"el-icon-edit",type:"primary",size:"mini",plain:""},on:{click:function(t){return e.edit(n,!1)}}},[e._v("\n              修改\n            ")]),e._v(" "),r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.delVideoRecord(n.id)}}},[e._v("\n              删除\n            ")])]}}])})],1)],e._v(" "),r("div",{staticClass:"pagination-container"},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,background:"",layout:"total, prev, pager, next, jumper",total:e.total,size:"mini"},on:{"current-change":e.handleCurrentChange}})],1)],2),e._v(" "),r("el-dialog",{attrs:{title:e.form.isDetail?"硬盘录像机配置详情":e.form.isEdit?"修改录像机配置":"新增录像机配置",visible:e.centerDialogVisible,width:"820px","close-on-click-modal":!1},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[r("el-form",{ref:"form",staticClass:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"录像机机品牌",prop:"dvrbrand"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择品牌",disabled:e.form.isDetail,clearable:""},model:{value:e.form.dvrbrand,callback:function(t){e.$set(e.form,"dvrbrand",t)},expression:"form.dvrbrand"}},e._l(e.options,(function(e){return r("el-option",{key:e.Code,attrs:{label:e.Desc,value:e.Code}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"录像机名称",prop:"dvrname"}},[r("el-input",{attrs:{placeholder:"请输入录像机名称",disabled:e.form.isDetail},model:{value:e.form.dvrname,callback:function(t){e.$set(e.form,"dvrname",t)},expression:"form.dvrname"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"录像机编号",prop:"dvrcode"}},[r("el-input",{attrs:{placeholder:"请输入录像机编号",disabled:e.form.isDetail},model:{value:e.form.dvrcode,callback:function(t){e.$set(e.form,"dvrcode",t)},expression:"form.dvrcode"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"IP",prop:"ip"}},[r("el-input",{attrs:{placeholder:"请输入IP",disabled:e.form.isDetail},model:{value:e.form.ip,callback:function(t){e.$set(e.form,"ip",t)},expression:"form.ip"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"端口号",prop:"port"}},[r("el-input",{attrs:{oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}",placeholder:"请输入端口号",disabled:e.form.isDetail},model:{value:e.form.port,callback:function(t){e.$set(e.form,"port",e._n(t))},expression:"form.port"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[r("el-input",{attrs:{placeholder:"请输入用户名",disabled:e.form.isDetail},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"passWord"}},[r("el-input",{attrs:{placeholder:"请输入密码",disabled:e.form.isDetail},model:{value:e.form.passWord,callback:function(t){e.$set(e.form,"passWord",t)},expression:"form.passWord"}})],1),e._v(" "),e.form.isDetail?e._e():r("el-form-item",{staticClass:"common-form-footer",staticStyle:{width:"100%"}},[r("div",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save}},[e._v(e._s(e.form.isEdit?"保存编辑":"立即新增"))]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.cancel}},[e._v("取消")])],1)])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"添加通道",visible:e.DialogVisible,width:"60%","close-on-click-modal":!1},on:{"update:visible":function(t){e.DialogVisible=t}}},[r("el-form",{ref:"form2",staticClass:"form2",attrs:{rules:e.rules2,inline:!0,model:e.form2,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"输入通道号",prop:"channel"}},[r("el-input",{attrs:{placeholder:"请输入通道号",oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.form2.channel,callback:function(t){e.$set(e.form2,"channel",e._n(t))},expression:"form2.channel"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"选择相机",prop:"accessoryCode"}},[r("el-select",{attrs:{size:"mini",placeholder:"请选择品牌",clearable:""},model:{value:e.form2.accessoryCode,callback:function(t){e.$set(e.form2,"accessoryCode",t)},expression:"form2.accessoryCode"}},e._l(e.sysCameraList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.accessoryName,value:e.id}})})),1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveChannel}},[e._v("新增通道")])],1)],1),e._v(" "),r("div",{staticClass:"content-body"},[[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.details}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{prop:"accessoryName",label:"录像机名称"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v("\n                "+e._s(e.cameraName(n.accessoryID))+"\n              ")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"IP"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v("\n                "+e._s(e.cameraName(n.accessoryID,"ip"))+"\n              ")])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"channel",label:"通道号"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.delDetail(n)}}},[e._v("\n                删除\n              ")])]}}])})],1)]],2),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.savelinked}},[e._v("保存")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.DialogVisible=!1}}},[e._v("取消")])],1)],1)],1)},a=[],i=(r("ac6a"),r("c5f6"),r("2909")),o=r("c7eb"),s=r("5530"),c=(r("96cf"),r("1da1")),l=r("f914"),u={data:function(){return{keyWord:"",centerDialogVisible:!1,DialogVisible:!1,form:{dvrbrand:"",dvrname:"",ip:"",port:"",dvrcode:"",userName:"",passWord:""},details:[],form1:{dvrname:"",dvrbrandCode:"",ip:""},form2:{accessoryCode:"",channel:33},options:[],videoRecordList:[],currentPage:1,total:0,searchLoding:!1,sysCameraList:[],rules:{dvrbrand:[{required:!0,message:"请选择品牌",trigger:"change"}],dvrname:[{required:!0,message:"请输入名称",trigger:"blur"}],port:[{required:!0,trigger:"blur",validator:function(e,t,r){""===t?r(new Error("请输入端口号")):/^(6553[0-5]|655[0-2]\d|65[0-4]\d{2}|6[0-4]\d{3}|[0-5]\d{4}|[1-9]\d{0,3})$/.test(t)?r():r(new Error("请输入正确端口号"))}}],ip:[{required:!0,trigger:"blur",validator:function(e,t,r){""===t?r(new Error("请输入ip")):/^((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)$/.test(t)?r():r(new Error("请输入正确ip"))}}],dvrcode:[{required:!0,message:"请输入编号",trigger:"blur"}],userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],passWord:[{required:!0,message:"其请输入密码",trigger:"blur"}]},rules2:{accessoryCode:[{required:!0,message:"请选择相机",trigger:"change"}],channel:[{required:!0,message:"请输入通道",trigger:"change"}]}}},mounted:function(){this.init()},methods:{init:function(){this.getCameraes(),this.getVideoRecords(),this.getSysCameraList()},getVideoRecords:function(){var e=Object(c["a"])(Object(o["a"])().mark((function e(){var t,r,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.currentPage,r=this.form1,e.next=3,Object(l["o"])(Object(s["a"])({current:t,limit:10},r));case 3:n=e.sent,2e4===n.code&&(this.videoRecordList=n.data||{}||[],this.total=(n.data||{}).total||0);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),connentAdvices:function(e){var t=this,r=e.details,n=e.id;this.form2.dvrid=n,this.details=Object(i["a"])(r),this.DialogVisible=!0,this.$nextTick((function(){t.$refs.form2.clearValidate()}))},add:function(){var e=this;this.form.isEdit=!1,this.form={dvrbrand:"",dvrname:"",ip:"",port:"",dvrcode:"",userName:"",passWord:""},this.centerDialogVisible=!0,this.$nextTick((function(){e.$refs.form.clearValidate()}))},handleCurrentChange:function(e){this.currentPage=e,this.getVideoRecords()},delVideoRecord:function(e){var t=this;this.$confirm("此操作将永久删除数据，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(Object(o["a"])().mark((function r(){var n;return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(l["d"])({ID:e});case 2:n=r.sent,2e4===n.code&&(t.$notify({message:"删除成功！",type:"success",title:"提示",duration:1e3}),t.getVideoRecords());case 4:case"end":return r.stop()}}),r)})))).catch((function(){}))},addRecorder:function(){var e=Object(c["a"])(Object(o["a"])().mark((function e(){var t,r;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.form,t.channel=Number(t.channel),t.port=Number(t.port),r={},!t.isEdit){e.next=10;break}return e.next=7,Object(l["C"])(t);case 7:r=e.sent,e.next=13;break;case 10:return e.next=12,Object(l["b"])(t);case 12:r=e.sent;case 13:2e4===r.code&&(this.$notify({message:"保存成功！",type:"success",title:"提示",duration:1e3}),this.getVideoRecords(),this.centerDialogVisible=!1);case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),save:function(){var e=this;this.$refs.form.validate((function(t){t&&e.addRecorder()}))},cancel:function(){this.centerDialogVisible=!1},delDetail:function(e){this.details=this.details.filter((function(t){return t.channel!==e.channel}))},edit:function(){var e=Object(c["a"])(Object(o["a"])().mark((function e(t,r){var n=this;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$nextTick((function(){n.$refs.form.clearValidate()})),this.form=Object(s["a"])({},t),this.form.isEdit=!0,this.form.isDetail=r,this.centerDialogVisible=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),getCameraes:function(){var e=Object(c["a"])(Object(o["a"])().mark((function e(){var t;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["k"])();case 2:t=e.sent,2e4===t.code&&(this.options=t.data||[]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getSysCameraList:function(){var e=Object(c["a"])(Object(o["a"])().mark((function e(){var t;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["n"])();case 2:t=e.sent,2e4===t.code&&(this.sysCameraList=t.data||[]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addChannel:function(){this.DialogVisible=!0},saveChannel:function(){var e=this,t=!1;if(this.$refs.form2.validate((function(e){if(!e)return!1;t=e})),t){var r=this.form2,n=r.accessoryCode,a=r.channel,i=!1;this.details.length&&this.details.forEach((function(e){e.accessoryID!==n&&e.channel!==a||(i=!0)})),i?this.$notify({message:"请不要经行重复配置",type:"error",title:"提示",duration:1e3}):(this.details.push({accessoryID:Number(n),channel:Number(a)}),this.form2={dvrid:this.form2.dvrid},this.$nextTick((function(){e.$refs.form2.clearValidate()})))}},cameraName:function(e,t){var r=this.sysCameraList,n="";return r&&r.length&&r.forEach((function(r){Number(r.id)===e&&(n=t?r.configJson.ip:r.accessoryName)})),n},savelinked:function(){var e=Object(c["a"])(Object(o["a"])().mark((function e(){var t,r,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.form2,r=this.details,e.prev=1,e.next=4,Object(l["B"])({details:r,dvrid:t.dvrid});case 4:n=e.sent,2e4===n.code&&(this.getVideoRecords(),this.$notify({type:"success",message:"保存成功",title:"提示",duration:1e3}),this.DialogVisible=!1),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](1);case 10:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}()}},d=u,f=(r("fdd2"),r("2877")),p=Object(f["a"])(d,n,a,!1,null,"547bf495",null);t["default"]=p.exports},f914:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"r",(function(){return i})),r.d(t,"z",(function(){return o})),r.d(t,"m",(function(){return s})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"A",(function(){return u})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return f})),r.d(t,"f",(function(){return p})),r.d(t,"v",(function(){return m})),r.d(t,"i",(function(){return b})),r.d(t,"l",(function(){return h})),r.d(t,"j",(function(){return v})),r.d(t,"x",(function(){return g})),r.d(t,"t",(function(){return y})),r.d(t,"u",(function(){return C})),r.d(t,"o",(function(){return _})),r.d(t,"b",(function(){return j})),r.d(t,"C",(function(){return O})),r.d(t,"d",(function(){return k})),r.d(t,"k",(function(){return w})),r.d(t,"n",(function(){return x})),r.d(t,"B",(function(){return D})),r.d(t,"y",(function(){return V})),r.d(t,"q",(function(){return S})),r.d(t,"p",(function(){return $}));var n=r("b775");function a(e,t){return Object(n["b"])({url:"/api/Vcu/CarrierMoveSwitch?Switch="+e+"&SendTime="+t,method:"post",data:{}})}function i(e,t,r,a){return Object(n["b"])({url:"/api/Vcu/Move?Direct="+e+"&Speed="+t+"&Span="+r+"&SendTime="+a,method:"post",data:{}})}function o(e){return Object(n["b"])({url:"/api/Vcu/StopAGV?SendTime="+e,method:"post",data:{}})}function s(e){return Object(n["a"])({url:"/api/CarrierSet/getCarrierList",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/api/CarrierSet/addCarrier",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/api/CarrierSet/deleteCarrier",method:"post",params:{ID:e}})}function u(e){return Object(n["a"])({url:"/api/CarrierSet/updateCarrier",method:"post",data:e})}function d(){return Object(n["a"])({url:"/api/Accessory/getAccessoryTypeList",method:"get"})}function f(e){return Object(n["a"])({url:"/api/Accessory/getAccessoryListByType?accessoryType="+e,method:"post"})}function p(){return Object(n["a"])({url:"/api/CarrierSet/getActionTypeList",method:"get"})}function m(e){return Object(n["a"])({url:"/api/CarrierAccessory/SaveCarrierAccessory",method:"post",data:e})}function b(e){return Object(n["a"])({url:"/api/CarrierAccessory/GetCarrierAccessoryList",method:"post",params:{carrierID:e}})}function h(e){return Object(n["a"])({url:"/api/Area/SearchArea",method:"post",data:e})}function v(){return Object(n["a"])({url:"/api/CarrierGroup/GetAllCarrierDetailInfo",method:"get"})}function g(e){return Object(n["a"])({url:"/api/CarrierGroup/RemoteSwitch",method:"post",data:e})}function y(e){return Object(n["a"])({url:"/api/CarrierGroup/RemoteControl",method:"post",data:e})}function C(e){return Object(n["a"])({url:"/api/CarrierGroup/RemoteStop",method:"post",data:e})}function _(e){return Object(n["a"])({url:"/api/DVR/GetList",method:"post",data:e})}function j(e){return Object(n["a"])({url:"/api/DVR/Insert",method:"post",data:e})}function O(e){return Object(n["a"])({url:"/api/DVR/Update",method:"post",data:e})}function k(e){return Object(n["a"])({url:"/api/DVR/Delete",method:"post",params:e})}function w(){return Object(n["a"])({url:"/api/DVR/GetDVRBrandList",method:"get"})}function x(){return Object(n["a"])({url:"/api/DVR/GetCameraList",method:"get"})}function D(e){return Object(n["a"])({url:"/api/DVR/UpdateDetails",method:"post",data:e})}function V(e){return Object(n["a"])({url:"/api/HKControl/voiceCall",method:"post",data:e})}function S(e){return Object(n["a"])({url:"/api/HKControl/Login",method:"post",data:e})}function $(e){return Object(n["a"])({url:"/api/HKControl/LoginOut",method:"get",data:e})}},f961:function(e,t,r){},fdd2:function(e,t,r){"use strict";r("f961")}}]);