(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b82a51a"],{"49ed":function(e,s,t){"use strict";t("c253")},6592:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticStyle:{padding:"1%"}},[t("div",{staticClass:"robot-header content-header"},[t("div",{staticClass:"robot-setting-inquire"},[t("el-button",{staticClass:"robot-operate",attrs:{type:"success",size:"mini"},on:{click:function(s){return e.plusAccesso()}}},[e._v(e._s(e.$t("equip_setting.add_equip_label")))])],1)]),e._v(" "),t("div",{staticClass:"robot-body content-body"},[t("el-table",{ref:"singleTable",staticClass:"robot-data",attrs:{data:e.accessoInfoArr,"header-row-class-name":"header-row-class","row-class-name":"row-class",fit:"","highlight-current-row":"",size:"small"},on:{"current-change":e.handleCurrentChange}},[t("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"name",label:"配件名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){var a=s.row;return[t("span",[e._v(e._s(a.name))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"number",label:"配件编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){var a=s.row;return[t("span",[e._v(e._s(a.number))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"brand",label:"配件品牌",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){var a=s.row;return[t("span",[e._v(e._s(e.text(a.brand,1)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"type",label:"配件类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){var a=s.row;return[t("span",[e._v(e._s(e.text(a.type,2)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"state",label:"配件状态",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(s){var a=s.row;return[t("span",[e._v(e._s(e.text(a.state,3)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"details",label:"配件详情",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){var a=s.row;return[t("el-button",{attrs:{type:"primary",icon:"el-icon-document",size:"mini",plain:""},on:{click:function(s){return e.editAccessoed(a,1)}}},[e._v(e._s(e.$t("plan_config.inqireDetail_label")))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"operate",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){var a=s.row;return[t("el-button",{staticClass:"robot-operate",attrs:{type:"primary",icon:"el-icon-edit",size:"mini",plain:""},on:{click:function(s){return e.editAccessoed(a,null)}}},[e._v("修改")]),e._v(" "),t("el-button",{staticClass:"robot-operate",attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(s){return e.deleteAccesso(a)}}},[e._v(e._s(e.$t("equip_setting.deleteAccesso_label")))])]}}])})],1)],1),e._v(" "),t("el-dialog",{attrs:{title:e.accessoDialog[e.dialogType],visible:e.dialogFormVisible,"close-on-click-modal":!1,width:"740px"},on:{"update:visible":function(s){e.dialogFormVisible=s},close:e.cancelOperate}},[t("el-form",{ref:"accessoForm",staticStyle:{"margin-left":"30px"},attrs:{"label-width":"100px",model:e.accessoForm,rules:e.rules,inline:!0}},[t("el-form-item",{attrs:{label:e.$t("equip_setting.accesso_number"),prop:"accessoNum"}},[t("el-input",{attrs:{disabled:e.accessoForm.isEdit,placeholder:"请输入配件编号"},model:{value:e.accessoForm.accessoNum,callback:function(s){e.$set(e.accessoForm,"accessoNum",s)},expression:"accessoForm.accessoNum"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("equip_setting.equip_name"),prop:"accessoName"}},[t("el-input",{attrs:{placeholder:"请输入配件名称",disabled:e.accessoForm.isEdit},model:{value:e.accessoForm.accessoName,callback:function(s){e.$set(e.accessoForm,"accessoName",s)},expression:"accessoForm.accessoName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("equip_setting.accesso_type"),prop:"accessoType"}},[t("el-select",{staticStyle:{width:"185px"},attrs:{placeholder:"请选择配件类型",disabled:e.accessoForm.isEdit,clearable:""},model:{value:e.accessoForm.accessoType,callback:function(s){e.$set(e.accessoForm,"accessoType",s)},expression:"accessoForm.accessoType"}},e._l(e.options,(function(e){return t("el-option",{key:e.Code,attrs:{label:e.Desc,value:e.Code}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("equip_setting.accesso_state"),prop:"accessoState"}},[t("el-select",{staticStyle:{width:"188px"},attrs:{placeholder:"请选择配件状态",clearable:""},model:{value:e.accessoForm.accessoState,callback:function(s){e.$set(e.accessoForm,"accessoState",s)},expression:"accessoForm.accessoState"}},e._l(e.stateOptions,(function(e){return t("el-option",{key:e.Code,attrs:{label:e.Desc,value:e.Code}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("equip_setting.camera_type"),prop:"cameraType"}},[t("el-select",{staticStyle:{width:"185px"},attrs:{placeholder:"请选择设备类型",disabled:e.accessoForm.isEdit,clearable:""},model:{value:e.accessoForm.cameraType,callback:function(s){e.$set(e.accessoForm,"cameraType",s)},expression:"accessoForm.cameraType"}},e._l(e.cameraOptions,(function(e){return t("el-option",{key:e.Code,attrs:{label:e.Desc,value:e.Code}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("equip_setting.brand_name"),prop:"brandName"}},[t("el-select",{staticStyle:{width:"188px"},attrs:{disabled:e.accessoForm.isEdit,placeholder:"请选择品牌",clearable:""},model:{value:e.accessoForm.brandName,callback:function(s){e.$set(e.accessoForm,"brandName",s)},expression:"accessoForm.brandName"}},e._l(e.brandNameOptions,(function(e){return t("el-option",{key:e.Code,attrs:{label:e.Desc,value:e.Code}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("equip_setting.accesso_ip"),prop:"accessoIp"}},[t("el-input",{attrs:{disabled:e.accessoForm.isEdit,placeholder:"请输入ip"},model:{value:e.accessoForm.accessoIp,callback:function(s){e.$set(e.accessoForm,"accessoIp",s)},expression:"accessoForm.accessoIp"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("equip_setting.accesso_port"),prop:"accessoPort"}},[t("el-input",{attrs:{disabled:e.accessoForm.isEdit,placeholder:"请输入端口",oninput:"if(value.length==1){value=value.replace(/[^1-9]/g,'')}else{value=value.replace(/\\D/g,'')}"},model:{value:e.accessoForm.accessoPort,callback:function(s){e.$set(e.accessoForm,"accessoPort",e._n(s))},expression:"accessoForm.accessoPort"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("equip_setting.user_name"),prop:"userName"}},[t("el-input",{attrs:{disabled:e.accessoForm.isEdit,placeholder:"请输入用户名"},model:{value:e.accessoForm.userName,callback:function(s){e.$set(e.accessoForm,"userName",s)},expression:"accessoForm.userName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("equip_setting.password_label"),prop:"password"}},[t("el-input",{attrs:{disabled:e.accessoForm.isEdit,placeholder:"请输入密码"},model:{value:e.accessoForm.password,callback:function(s){e.$set(e.accessoForm,"password",s)},expression:"accessoForm.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"推流地址",prop:"rtsp"}},[t("el-input",{staticStyle:{width:"490px",margin:"10px 0"},attrs:{type:"textarea",maxlength:"150",placeholder:"请输入推流地址",disabled:e.accessoForm.isEdit},model:{value:e.accessoForm.rtsp,callback:function(s){e.$set(e.accessoForm,"rtsp",s)},expression:"accessoForm.rtsp"}})],1),e._v(" "),e.accessoForm.isEdit?e._e():t("el-form-item",{staticClass:"common-form-footer"},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){"addAccesso"===e.dialogType?e.addSuccess("accessoForm",e.accessoForm):e.editSuccess("accessoForm",e.accessoForm)}}},[e._v(e._s(e.$t("equip_setting.sure_label")))]),e._v(" "),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(s){return e.cancelOperate("accessoForm")}}},[e._v(e._s(e.$t("equip_setting.cancel_label")))])],1)],1)],1)],1)},c=[],o=(t("ac6a"),t("c5f6"),t("7f7f"),t("b775"));function r(){return Object(o["a"])({url:"/api/Accessory/getAccessoryList",method:"get"})}function i(e){return Object(o["a"])({url:"/api/Accessory/addAccessory",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/api/Accessory/deleteAccessory",method:"post",params:{ID:e}})}function l(e){return Object(o["a"])({url:"/api/Accessory/updateAccessory",method:"post",data:e})}function u(){return Object(o["a"])({url:"/api/Accessory/getAccessoryTypeList",method:"get"})}function d(){return Object(o["a"])({url:"/api/Accessory/getAccessoryStateList",method:"get"})}function p(){return Object(o["a"])({url:"/api/Accessory/getCameraTypeList",method:"get"})}function m(){return Object(o["a"])({url:"/api/Accessory/getBrandTypeList",method:"get"})}var f={data:function(){return{inquireVal:"",accessoInfoArr:[],dialogFormVisible:!1,dialogType:"",options:[],stateOptions:[],cameraOptions:[],accessoDialog:{addAccesso:this.$t("equip_setting.plusAccesso_label"),editAccesso:this.$t("equip_setting.editAccesso_label"),detail:"配件详情"},accessoForm:{accessoName:"",accessoNum:"",accessoType:"",accessoBrand:"",accessoState:1,accessoIp:"",accessoPort:"",cameraType:"",brandName:"",userName:"",password:""},brandNameOptions:[],rules:{accessoName:[{required:!0,message:"请输入配件名称",trigger:"blur"}],accessoNum:[{required:!0,message:"请输入配件编号",trigger:"blur"}],accessoType:[{required:!0,message:"请选择配件类型",trigger:"change"}],accessoState:[{required:!0,message:"请选择配件状态",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"}],userName:[{required:!0,message:"请输入用户名称",trigger:"change"}],accessoPort:[{required:!0,trigger:"blur",validator:function(e,s,t){""===s?t(new Error("请输入端口")):/^(6553[0-5]|655[0-2]\d|65[0-4]\d{2}|6[0-4]\d{3}|[0-5]\d{4}|[1-9]\d{0,3})$/.test(s)?t():t(new Error("请输入正确端口"))}}],cameraType:[{required:!0,message:"请选择设备类型",trigger:"change"}],accessoIp:[{required:!0,trigger:"blur",validator:function(e,s,t){""===s?t(new Error("请输入配件IP")):/^((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)$/.test(s)?t():t(new Error("请输入正确IP"))}}],brandName:[{required:!0,message:"请选择品牌",trigger:"change"}],rtsp:[{required:!0,message:"输入推流地址",trigger:"change"}]},currentRow:null,standByChecked:!1,standByPoint:"",simuChecked:!1,simuStarts:"",dialogDetailFlag:!1,detailForm:{accessType:"",ip:"",port:"",cameraType:"",brandName:"",userName:"",password:"",rtsp:""},ID:0}},mounted:function(){this.initAccesso(),this.initBrand(),this.init()},methods:{initBrand:function(){var e=this;m().then((function(s){2e4===s.code&&(e.brandNameOptions=s.data||[])})).catch((function(s){e.$notify({title:e.$t("user.Failure"),message:e.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))},initAccesso:function(){var e=this;u().then((function(s){2e4===s.code&&(e.options=s.data||[]),e.initState()})).catch((function(s){e.$notify({title:e.$t("user.Failure"),message:e.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))},initState:function(){var e=this;d().then((function(s){2e4===s.code&&(e.stateOptions=s.data||[]),e.initCamera()})).catch((function(s){e.$notify({title:e.$t("user.Failure"),message:e.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))},initCamera:function(){var e=this;p().then((function(s){2e4===s.code&&(e.cameraOptions=s.data||[])})).catch((function(s){e.$notify({title:e.$t("user.Failure"),message:e.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))},init:function(){var e=this;e.accessoInfoArr=[],r().then((function(s){for(var t=s.data,a=0,c=t.length;a<c;a++){var o={id:t[a].id,number:t[a].accessoryCode,brand:t[a].accessoryBrand,name:t[a].accessoryName,type:t[a].accessoryType,state:t[a].accessoryState,cameraType:t[a].configJson["cameraType"],ip:t[a].configJson["ip"],brandName:t[a].configJson["brandName"],port:t[a].configJson["port"],userName:t[a].configJson["userName"],password:t[a].configJson["passWord"],rtsp:t[a].configJson.rtsp};e.accessoInfoArr.push(o)}})).catch((function(s){e.$notify({title:e.$t("user.Failure"),message:e.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))},inquireAccesso:function(){if(this.inquireVal&&0!==this.accessoInfoArr.length){for(var e=[],s=0,t=this.accessoInfoArr.length;s<t;s++)this.inquireVal==this.accessoInfoArr[s].name&&e.push(this.accessoInfoArr[s]);e.length?this.accessoInfoArr=e:alert("未检索到满足要求的配件")}else this.init()},plusAccesso:function(){this.dialogFormVisible=!0,this.dialogType="addAccesso",this.resetForm()},addSuccess:function(e,s){var t=this,a=this;this.$refs.accessoForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;var c={ip:s.accessoIp,cameraType:s.cameraType,port:Number(s.accessoPort),userName:s.userName,brandName:s.brandName,passWord:s.password,modelNo:"HK001",rtsp:s.rtsp},o={accessoryCode:s.accessoNum,accessoryBrand:s.brandName,accessoryName:s.accessoName,accessoryType:s.accessoType,accessoryState:s.accessoState,configJson:JSON.stringify(c),rtsp:s.rtsp};i(o).then((function(e){2e4===e.code&&(t.$notify({type:"success",message:"新增成功！",title:"提示",duration:1e3}),a.init(),t.dialogFormVisible=!1)})).catch((function(e){a.cancelOperate(),a.$notify({title:a.$t("user.Failure"),message:a.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))}))},editAccessoed:function(e,s){this.dialogFormVisible=!0,this.dialogType="editAccesso",e&&(this.ID=e.id,this.accessoForm={accessoName:e.name,accessoNum:e.number,accessoBrand:e.brand,accessoIp:e.ip,accessoPort:e.port,brandName:e.brandName,userName:e.userName,password:e.password,accessoType:e.type,accessoState:e.state,cameraType:e.cameraType,rtsp:e.rtsp}),1===s?(this.accessoForm.isEdit=!0,this.dialogType="detail"):this.accessoForm.isEdit=!1},editSuccess:function(e,s){var t=this,a=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var c={ip:s.accessoIp,port:Number(s.accessoPort),userName:s.userName,brandName:s.brandName,cameraType:s.cameraType,passWord:s.password,modelNo:"HK001",rtsp:s.rtsp},o={id:a.ID,accessoryCode:s.accessoNum,accessoryBrand:s.brandName,accessoryName:s.accessoName,accessoryType:s.accessoType,accessoryState:s.accessoState,configJson:JSON.stringify(c),rtsp:s.rtsp};l(o).then((function(e){2e4===e.code&&(t.$notify({type:"success",message:"修改成功！",title:"提示",duration:1e3}),a.init(),t.dialogFormVisible=!1)})).catch((function(e){a.cancelOperate(),a.$notify({title:a.$t("user.Failure"),message:a.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))}))},cancelOperate:function(e){this.dialogFormVisible=!1,this.$refs.accessoForm.resetFields(),this.resetForm()},deleteAccesso:function(e){var s=this,t=this;e&&this.$confirm(t.$t("public_vary.delete_operate_tip"),t.$t("public_vary.warning_tip"),{confirmButtonText:t.$t("public_vary.sure_label"),cancelButtonText:t.$t("public_vary.cancel_label"),type:"warning"}).then((function(){n(e.id).then((function(e){e.data;2e4===e.code&&(t.init(),s.$notify({title:s.$t("user.Success"),message:s.$t("user.Delete_Success"),type:"success",duration:1e3}))})).catch((function(e){t.$notify({title:t.$t("user.Failure"),message:t.$t("user.interface_call_failed_tip"),type:"error",duration:1e3})}))})).catch((function(){}))},resetForm:function(){this.accessoForm={accessoName:"",accessoNum:"",accessoType:"",accessoBrand:"",accessoState:(this.stateOptions[0]||{}).Code,accessoIp:"",accessoPort:"",cameraType:"",brandName:"",userName:"",password:""}},handleCurrentChange:function(e){this.currentRow=e},text:function(e,s){var t="";switch(s){case 1:this.brandNameOptions.forEach((function(s){s.Code===e&&(t=s.Desc)}));break;case 2:this.options.forEach((function(s){s.Code===e&&(t=s.Desc)}));break;case 3:this.stateOptions.forEach((function(s){s.Code===e&&(t=s.Desc)}));break;default:break}return t}}},b=f,g=(t("49ed"),t("2877")),y=Object(g["a"])(b,a,c,!1,null,"1f02fd58",null);s["default"]=y.exports},c253:function(e,s,t){}}]);